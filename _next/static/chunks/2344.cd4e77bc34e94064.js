"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2344],{20353:function(a,b,c){c.d(b,{Z:function(){return t}});var d=c(26042),e=c(69396),f=c(99534),g=c(85893);c(67294);var h=c(7297),i=c(87379),j=c(57247),k=c(44147);function l(){var a=(0,h.Z)(["\n  0% {\n    background-position: 50% 0%;\n  }\n  50% {\n    background-position: 50% 100%;\n  }\n  100% {\n    background-position: 50% 0%;\n  }\n"]);return l=function(){return a},a}function m(){var a=(0,h.Z)(["\n      animation: "," 3s ease infinite;\n      background-size: 400% 400%;\n    "]);return m=function(){return a},a}function n(){var a=(0,h.Z)(["\n  background: ",";\n  border-radius: ",";\n  color: ",";\n  overflow: hidden;\n  position: relative;\n\n  ","\n\n  padding: 1px 1px 3px 1px;\n\n  ","\n"]);return n=function(){return a},a}function o(){var a=(0,h.Z)(["\n  width: 100%;\n  height: 100%;\n  overflow: ",";\n  background: ",";\n  // background: rgba(255, 255, 255, 0.1);\n  border-radius: ",";\n"]);return o=function(){return a},a}var p=(0,i.F4)(l()),q=function(a){var b=a.isActive,c=a.isSuccess,d=a.isWarning,e=a.borderBackground,f=a.theme;return e||(d?f.colors.warning:c?f.colors.success:b?"linear-gradient(180deg, ".concat(f.colors.primaryBright,", ").concat(f.colors.secondary,")"):f.colors.cardBorder)},r=i.ZP.div.withConfig({componentId:"sc-4fb2107a-0"}).withConfig({componentId:"sc-f44fd48b-0"})(n(),q,function(a){return a.theme.radii.card},function(a){var b=a.theme,c=a.isDisabled;return b.colors[c?"textDisabled":"text"]},function(a){return a.isActive&&(0,i.iv)(m(),p)},j.Dh),s=(0,i.ZP)(k.Z).withConfig({componentId:"sc-4fb2107a-1"}).withConfig({componentId:"sc-f44fd48b-1"})(o(),function(a){return a.hasCustomBorder?"initial":"inherit"},function(a){var b=a.theme,c=a.background;return null!=c?c:b.card.background},function(a){return a.theme.radii.card});r.defaultProps={isActive:!1,isSuccess:!1,isWarning:!1,isDisabled:!1};var t=function(a){var b=a.ribbon,c=a.children,h=a.background,i=(0,f.Z)(a,["ribbon","children","background"]);return(0,g.jsx)(r,(0,e.Z)((0,d.Z)({},i),{children:(0,g.jsxs)(s,{background:h,hasCustomBorder:!!i.borderBackground,children:[b,c]})}))}},88896:function(a,b,c){c.d(b,{Z:function(){return B}});var d=c(82670),e=c(26042),f=c(69396),g=c(85893),h=c(18522),i=c(55606),j=c(21190),k=c(67294),l=c(73935),m=c(89145),n=c(87379),o=c(99885),p=c(10494),q=c(70032),r=c(44047),s=c(7297),t=c(45962);function u(){var a=(0,s.Z)(['\n  &,\n  &::before {\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    border-radius: 2px;\n    z-index: -1;\n  }\n\n  &::before {\n    content: "";\n    transform: rotate(45deg);\n    background: ',";\n  }\n"]);return u=function(){return a},a}function v(){var a=(0,s.Z)(["\n  padding: 16px;\n  font-size: 16px;\n  line-height: 130%;\n  border-radius: 10px;\n  max-width: 320px;\n  z-index: 101;\n  background: ",";\n  color: ",";\n  box-shadow: ",';\n\n  &[data-popper-placement^="top"] > ',' {\n    bottom: -4px;\n  }\n\n  &[data-popper-placement^="bottom"] > ',' {\n    top: -4px;\n  }\n\n  &[data-popper-placement^="left"] > ',' {\n    right: -4px;\n  }\n\n  &[data-popper-placement^="right"] > '," {\n    left: -4px;\n  }\n"]);return v=function(){return a},a}var w=n.ZP.div.withConfig({componentId:"sc-9dfac35e-0"}).withConfig({componentId:"sc-cf13e2c1-0"})(u(),function(a){return a.theme.tooltip.background}),x=(0,n.ZP)(t.m.div).withConfig({componentId:"sc-9dfac35e-1"}).withConfig({componentId:"sc-cf13e2c1-1"})(v(),function(a){return a.theme.tooltip.background},function(a){return a.theme.tooltip.text},function(a){return a.theme.tooltip.boxShadow},w,w,w,w),y={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},z={initial:"initial",animate:"animate",exit:"exit"},A=function(a){return a.isDark?o.Z:p.Z},B=function(a,b){var c=b.placement,o=b.trigger,p=void 0===o?"hover":o,s=b.arrowPadding,t=b.tooltipPadding,u=b.tooltipOffset,v=b.hideTimeout,B=void 0===v?100:v,C=(0,k.useState)(null),D=C[0],E=C[1],F=(0,k.useState)(null),G=F[0],H=F[1],I=(0,k.useState)(null),J=I[0],K=I[1],L=(0,k.useState)(!1),M=L[0],N=L[1],O=(0,k.useRef)(!1),P=(0,k.useRef)(),Q=(0,k.useCallback)(function(a){var b=function(){a.stopPropagation(),a.preventDefault(),N(!1)};"hover"===p?(P.current&&window.clearTimeout(P.current),a.target===G&&(O.current=!1),O.current||(P.current=window.setTimeout(function(){O.current||b()},B))):b()},[G,p,B]),R=(0,k.useCallback)(function(a){a.stopPropagation(),a.preventDefault(),N(!0),"hover"===p&&(a.target===D&&clearTimeout(P.current),a.target===G&&(O.current=!0))},[G,D,p]),S=(0,k.useCallback)(function(a){a.stopPropagation(),N(!M)},[M]);(0,k.useEffect)(function(){if(null!==D&&"hover"===p)return(0,r.Z)()?(D.addEventListener("touchstart",R),D.addEventListener("touchend",Q)):(D.addEventListener("mouseenter",R),D.addEventListener("mouseleave",Q)),function(){D.removeEventListener("touchstart",R),D.removeEventListener("touchend",Q),D.removeEventListener("mouseenter",R),D.removeEventListener("mouseleave",R)}},[p,D,Q,R]),(0,k.useEffect)(function(){if(null!==G&&"hover"===p)return G.addEventListener("mouseenter",R),G.addEventListener("mouseleave",Q),function(){G.removeEventListener("mouseenter",R),G.removeEventListener("mouseleave",Q)}},[p,G,Q,R]),(0,k.useEffect)(function(){if(null!==D&&"click"===p)return D.addEventListener("click",S),function(){return D.removeEventListener("click",S)}},[p,D,M,S]),(0,k.useEffect)(function(){if("click"===p){var a=function(a){var b=a.target;!(0,d.Z)(b,Node)||null==G||null==D||G.contains(b)||D.contains(b)||N(!1)};return document.addEventListener("mousedown",a),function(){return document.removeEventListener("mousedown",a)}}},[p,D,G]),(0,k.useEffect)(function(){if(null!==D&&"focus"===p)return D.addEventListener("focus",R),D.addEventListener("blur",Q),function(){D.removeEventListener("focus",R),D.removeEventListener("blur",Q)}},[p,D,R,Q]);var T=(0,m.D)(D,G,{placement:void 0===c?"auto":c,modifiers:[{name:"arrow",options:{element:J,padding:void 0===s?16:s}},{name:"offset",options:{offset:void 0===u?[0,10]:u}},{name:"preventOverflow",options:{padding:void 0===t?{left:16,right:16}:t}},]}),U=T.styles,V=T.attributes,W=(0,g.jsxs)(x,(0,f.Z)((0,e.Z)((0,f.Z)((0,e.Z)({},z),{variants:y,transition:{duration:.3},ref:H,style:U.popper}),V.popper),{children:[(0,g.jsx)(n.f6,{theme:A,children:a}),(0,g.jsx)(w,{ref:K,style:U.arrow})]})),X=(0,g.jsx)(h.X,{features:i.H,children:(0,g.jsx)(j.M,{children:M&&W})}),Y=(0,q.Z)(),Z=Y?(0,l.createPortal)(X,Y):null;return{targetRef:E,tooltip:null!=Z?Z:X,tooltipVisible:M}}},22344:function(a,b,c){c.r(b),c.d(b,{default:function(){return N}});var d,e,f,g,h=c(26042),i=c(10253),j=c(7297),k=c(85893),l=c(97478),m=c(52775),n=c(87379),o=c(20353),p=c(75943),q=c(44147),r=c(88896),s=c(62077),t=c(95459),u=c(921),v=c(47568),w=c(34051),x=c.n(w),y=c(67294),z=c(28687),A=c(62621),B=c(6680),C=c(33533);function D(){var a=(0,j.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                synced\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return D=function(){return a},a}(E=d||(d={}))[E.OK=0]="OK",E[E.WARNING=1]="WARNING",E[E.NOT_OK=2]="NOT_OK",E[E.UNKNOWN=3]="UNKNOWN";var E,F=function(a){var b=(0,y.useState)({status:d.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),c=b[0],e=b[1];return(0,C.X)(function(b){var c;(c=(0,v.Z)(x().mark(function c(){var f,g,h,j,k,l,m,n;return x().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.t0=i.Z,c.next=4,Promise.all([(0,z.request)(B.AM,(0,z.gql)(D(),a)),b?Promise.resolve(b):A.v.getBlockNumber(),]);case 4:c.t1=c.sent,g=(f=(0,c.t0)(c.t1,2))[0].indexingStatusForCurrentVersion,h=f[1],j="healthy"===g.health,k=parseInt(g.chains[0].chainHeadBlock.number),l=parseInt(g.chains[0].latestBlock.number),m=h-l,n=h-k,!j||m>200||n>200?e({status:d.NOT_OK,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}):m>50||n>50?e({status:d.WARNING,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}):e({status:d.OK,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}),c.next=19;break;case 16:c.prev=16,c.t2=c.catch(0),console.error("Failed to perform health check for ".concat(a," subgraph"),c.t2);case 19:case"end":return c.stop()}},c,null,[[0,16]])})),function(){return c.apply(this,arguments)})()},[a]),c};function G(){var a=(0,j.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return G=function(){return a},a}function H(){var a=(0,j.Z)(["\n  gap: 7px;\n"]);return H=function(){return a},a}function I(){var a=(0,j.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return I=function(){return a},a}var J=(0,n.ZP)(o.Z).withConfig({componentId:"sc-46961c6e-0"})(G()),K=(0,n.ZP)(p.Z).withConfig({componentId:"sc-46961c6e-1"})(H()),L=(0,n.ZP)(q.Z).withConfig({componentId:"sc-46961c6e-2"})(I(),function(a){var b=a.$color,c=a.theme;return c.colors[b]}),M=function(a){var b=a.color,c=a.label,d=a.description,e=a.currentBlock,f=a.secondRemainingBlockSync,g=a.blockNumberFromSubgraph,h=(0,m.$G)().t;return(0,k.jsxs)(q.Z,{children:[(0,k.jsxs)(K,{pb:"10px",children:[(0,k.jsx)(L,{$color:b}),(0,k.jsx)(s.Z,{children:c})]}),(0,k.jsx)(s.Z,{pb:"24px",children:d}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Chain Head Block"),":"]})," ",e]}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Latest Subgraph Block"),":"]})," ",g]}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Delay"),":"]})," ",e-g," (",f,"s)"]})]})},N=function(a){var b,c,j,n=a.subgraphName,o=a.inline,p=a.customDescriptions,v=a.obeyGlobalSetting,w=(0,m.$G)().t,x=F(n),y=x.status,z=x.currentBlock,A=x.blockDifference,B=x.latestBlock,C=(0,i.Z)((0,u.YF)(),1),D=C[0],E=y===d.WARNING||y===d.NOT_OK,G=(b=w,c=p,{delayed:{label:b("Delayed"),color:"failure",description:null!==(e=null==c?void 0:c.delayed)&& void 0!==e?e:b("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},slow:{label:b("Slight delay"),color:"warning",description:null!==(f=null==c?void 0:c.slow)&& void 0!==f?f:b("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},healthy:{label:b("Fast"),color:"success",description:null!==(g=null==c?void 0:c.healthy)&& void 0!==g?g:b("No issues with the subgraph.")}}),H=A*l.hJ,I=G[(j=y)===d.NOT_OK?"delayed":j===d.WARNING?"slow":"healthy"],N=(0,r.Z)((0,k.jsx)(M,(0,h.Z)({currentBlock:z,secondRemainingBlockSync:H,blockNumberFromSubgraph:B},I)),{placement:"top"}),O=N.targetRef,P=N.tooltipVisible,Q=N.tooltip;return B&&z&&((void 0===v||v)&&D||E)?o?(0,k.jsxs)(K,{alignItems:"center",justifyContent:"flex-end",ref:O,children:[(0,k.jsx)(L,{$color:I.color}),(0,k.jsx)(s.Z,{children:I.label}),(0,k.jsx)(t.Z,{}),P&&Q]}):(0,k.jsxs)(q.Z,{position:"fixed",bottom:"calc(55px + env(safe-area-inset-bottom))",right:"5%",ref:O,"data-test":"subgraph-health-indicator",children:[P&&Q,(0,k.jsx)(J,{children:(0,k.jsxs)(K,{alignItems:"center",p:"10px",children:[(0,k.jsx)(L,{$color:I.color}),(0,k.jsx)(s.Z,{children:I.label}),(0,k.jsx)(t.Z,{})]})})]}):null}}}])