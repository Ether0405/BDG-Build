"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[965],{40965:function(a,b,c){c.d(b,{Z:function(){return ah}});var d,e,f=c(85893),g=c(85937),h=c(52775),i=c(26042),j=c(69396),k=c(67294);(e=d||(d={})).START="start",e.CHANGE="change",e.REMOVE="remove",e.APPROVE="approve";var l=function(a,b){switch(b.type){case"set_view":return(0,j.Z)((0,i.Z)({},a),{currentView:b.view,previousView:a.currentView});case"go_previous":return(0,j.Z)((0,i.Z)({},a),{currentView:a.previousView,previousView:a.currentView});default:return a}},m=function(){var a=(0,k.useReducer)(l,{currentView:d.START,previousView:null}),b=a[0],c=a[1],e=function(){return c({type:"set_view",view:d.START})},f=function(){return c({type:"set_view",view:d.CHANGE})},g=function(){return c({type:"set_view",view:d.REMOVE})},h=function(){return c({type:"set_view",view:d.APPROVE})},m=function(){return c({type:"go_previous"})};return(0,j.Z)((0,i.Z)({},b),{goToStart:e,goToChange:f,goToRemove:g,goToApprove:h,goPrevious:m})},n=c(47568),o=c(7297),p=c(34051),q=c.n(p),r=c(87379),s=c(29315),t=c(98553),u=c(75943),v=c(62077),w=c(59123),x=c(69352),y=c(36963),z=c(94186),A=c(10253),B=c(21046),C=c(9796),D=c(92335),E=c(19237),F=function(){var a=(0,h.$G)().t,b=(0,k.useState)(!0),c=b[0],d=b[1],e=(0,k.useState)({numberCakeToReactivate:B._Y,numberCakeToRegister:B._Y,numberCakeToUpdate:B._Y}),f=e[0],g=e[1],i=(0,E.p)().toastError;return(0,k.useEffect)(function(){var b;(b=(0,n.Z)(q().mark(function b(){var c,e,f,h,j,k,l,m;return q().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,c=["numberCakeToReactivate","numberCakeToRegister","numberCakeToUpdate"].map(function(a){return{address:(0,x.Re)(),name:a}}),b.t0=A.Z,b.next=5,(0,C.v)({abi:D,calls:c});case 5:b.t1=b.sent,e=(0,b.t0)(b.t1,3),h=(f=(0,A.Z)(e[0],1))[0],j=(0,A.Z)(e[1],1),k=j[0],l=(0,A.Z)(e[2],1),m=l[0],g({numberCakeToReactivate:h,numberCakeToRegister:k,numberCakeToUpdate:m}),d(!1),b.next=20;break;case 17:b.prev=17,b.t2=b.catch(0),i(a("Error"),a("Could not retrieve CAKE costs for profile"));case 20:case"end":return b.stop()}},b,null,[[0,17]])})),function(){return b.apply(this,arguments)})()},[g,i,a]),{costs:f,isLoading:c}},G=F,H=c(75759),I=c(35831),J=c(72007),K=c(39512);function L(){var a=(0,o.Z)(["\n  border-color: ",";\n  color: ",";\n  margin-bottom: 24px;\n\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\n    border-color: ",";\n    opacity: 0.8;\n  }\n"]);return L=function(){return a},a}function M(){var a=(0,o.Z)(["\n  height: 64px;\n  width: 64px;\n\n  "," {\n    height: 128px;\n    width: 128px;\n  }\n"]);return M=function(){return a},a}var N=(0,r.ZP)(t.Z).attrs({variant:"secondary"}).withConfig({componentId:"sc-17dd7e85-0"})(L(),function(a){return a.theme.colors.failure},function(a){return a.theme.colors.failure},function(a){return a.theme.colors.failure}),O=r.ZP.div.withConfig({componentId:"sc-17dd7e85-1"})(M(),function(a){return a.theme.mediaQueries.sm}),P=function(a){var b=a.goToApprove,c=a.goToChange,d=a.goToRemove,e=a.onDismiss,g=(0,h.$G)().t,i=(0,s.Ge)().account,j=(0,y.kL)(),l=j.reader,m=(0,J.Un)().profile,o=(0,z.Nn)(),p=o.balance,r=o.fetchStatus,A=G(),B=A.costs,C=B.numberCakeToUpdate,D=B.numberCakeToReactivate,E=A.isLoading,F=(0,k.useState)(null),L=F[0],M=F[1],P=(null==m?void 0:m.isActive)?C:D,Q=r===H.iF.Fetched&&p.gte(P);return((0,k.useEffect)(function(){var a,b=(a=(0,n.Z)(q().mark(function a(){var b;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,I.S)(l,i,(0,x.Re)(),P);case 2:M(b=a.sent);case 4:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});i&&!E&&b()},[i,P,M,l,E]),m)?(0,f.jsxs)(u.Z,{alignItems:"center",justifyContent:"center",flexDirection:"column",children:[(0,f.jsx)(O,{children:(0,f.jsx)(K.Z,{profile:m})}),(0,f.jsx)(u.Z,{alignItems:"center",style:{height:"48px"},justifyContent:"center",children:(0,f.jsx)(v.Z,{as:"p",color:"failure",children:!E&&!Q&&g("%minimum% CAKE required to change profile pic",{minimum:(0,w.dp)(P)})})}),m.isActive?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(t.Z,{width:"100%",mb:"8px",onClick:!0===L?b:c,disabled:E||!Q||null===L,children:g("Change Profile Pic")}),(0,f.jsx)(N,{width:"100%",onClick:d,children:g("Remove Profile Pic")})]}):(0,f.jsx)(t.Z,{width:"100%",mb:"8px",onClick:!0===L?b:c,disabled:E||!Q||null===L,children:g("Reactivate Profile")}),(0,f.jsx)(t.Z,{variant:"text",width:"100%",onClick:e,children:g("Close Window")})]}):null},Q=c(92052),R=c(63771),S=c(85900),T=c(76431),U=c(96036),V=function(a){var b,c=a.onDismiss,d=a.onSuccess,e=(0,k.useState)(!1),g=e[0],i=e[1],j=(0,J.Un)(),l=j.profile,m=j.refresh,o=G(),p=o.costs.numberCakeToReactivate,r=(0,h.$G)().t,s=(0,y.wr)(),x=(0,S.d)().callWithGasPrice,z=(0,E.p)().toastSuccess,A=(0,T.Z)(),B=A.fetchWithCatchTxError,C=A.loading,D=function(){return i(!g)},F=(b=(0,n.Z)(q().mark(function a(){var b;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B(function(){return x(s,"pauseProfile")});case 2:(null==(b=a.sent)?void 0:b.status)&&(m(),z(r("Profile Paused!"),(0,f.jsx)(U.Y,{txHash:b.transactionHash})),null==d||d(),null==c||c());case 4:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return l?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{as:"p",color:"failure",mb:"24px",children:r("This will suspend your profile and send your Collectible back to your wallet")}),(0,f.jsx)(v.Z,{as:"p",color:"textSubtle",mb:"24px",children:r("While your profile is suspended, you won't be able to earn points, but your achievements and points will stay associated with your profile")}),(0,f.jsx)(v.Z,{as:"p",color:"textSubtle",mb:"24px",children:r("Cost to reactivate in the future: %cost% CAKE",{cost:(0,w.dp)(p)})}),(0,f.jsx)("label",{htmlFor:"acknowledgement",style:{cursor:"pointer",display:"block",marginBottom:"24px"},children:(0,f.jsxs)(u.Z,{alignItems:"center",children:[(0,f.jsx)(Q.Z,{id:"acknowledgement",checked:g,onChange:D,scale:"sm"}),(0,f.jsx)(v.Z,{ml:"8px",children:r("I understand")})]})}),(0,f.jsx)(t.Z,{width:"100%",isLoading:C,endIcon:C?(0,f.jsx)(R.Z,{spin:!0,color:"currentColor"}):null,disabled:!g||C,onClick:F,mb:"8px",children:r("Confirm")}),(0,f.jsx)(t.Z,{variant:"text",width:"100%",onClick:c,children:r("Close Window")})]}):null},W=c(62685),X=c(44147),Y=c(73546),Z=c(6169),$=c(9882),_=c(91186),aa=c(21421),ab=c(54529),ac=c(69077),ad=c(97755),ae=function(a){var b,c=a.onDismiss,d=a.onSuccess,e=(0,k.useState)({tokenId:null,collectionAddress:null}),g=e[0],i=e[1],j=(0,h.$G)().t,l=(0,s.Ge)().account,m=(0,ac.mx)().data,o=(0,J.Un)(),p=o.isLoading,r=o.profile,u=o.refresh,w=(0,ad.L)(l,r,p),z=w.nfts,A=w.isLoading,B=(0,y.wr)(),C=(0,E.p)().toastSuccess,D=(0,S.d)().callWithGasPrice,F=(0,k.useMemo)(function(){return z.filter(function(a){return a.location===_.Fb.WALLET})},[z]),G=(0,$.mN)(F).data,H=(0,k.useMemo)(function(){return!!G&&!!G[g.tokenId]},[G,g.tokenId]),I=(0,Z.Z)({onApprove:function(){var a=(0,aa.vE)(g.collectionAddress,m);return D(a,"approve",[(0,x.Re)(),g.tokenId])},onConfirm:function(){return r.isActive?D(B,"updateProfile",[g.collectionAddress,g.tokenId]):D(B,"reactivateProfile",[g.collectionAddress,g.tokenId,])},onSuccess:(b=(0,n.Z)(q().mark(function a(b){var e;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=b.receipt,u(),C(j("Profile Updated!"),(0,f.jsx)(U.Y,{txHash:e.transactionHash})),null==d||d(),null==c||c();case 5:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)})}),K=I.isApproving,L=I.isApproved,M=I.isConfirmed,N=I.isConfirming,O=I.handleApprove,P=I.handleConfirm,Q=L||H;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{as:"p",color:"textSubtle",mb:"24px",children:j("Choose a new Collectible to use as your profile pic.")}),A?(0,f.jsx)(W.Z,{width:"100%",height:"80px",mb:"16px"}):F.length>0?(0,f.jsx)(X.Z,{maxHeight:"300px",overflowY:"scroll",children:F.map(function(a){var b=function(){i({tokenId:a.tokenId,collectionAddress:a.collectionAddress})};return(0,f.jsx)(ab.Z,{name:"profilePicture",value:a.tokenId,image:a.image.thumbnail,isChecked:a.tokenId===g.tokenId,onChange:b,disabled:K||N||M,children:(0,f.jsx)(v.Z,{bold:!0,children:a.name})},"".concat(a.collectionAddress,"#").concat(a.tokenId))})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{as:"p",color:"textSubtle",mb:"16px",children:j("Sorry! You donâ€™t have any eligible Collectibles in your wallet to use!")}),(0,f.jsx)(v.Z,{as:"p",color:"textSubtle",mb:"24px",children:j("Make sure you have a Pancake Collectible in your wallet and try again!")})]}),(0,f.jsx)(Y.Z,{isApproveDisabled:M||N||Q||null===g.tokenId,isApproving:K,isConfirmDisabled:!Q||M||null===g.tokenId,isConfirming:N,onApprove:O,onConfirm:P}),(0,f.jsx)(t.Z,{mt:"8px",variant:"text",width:"100%",onClick:c,disabled:K||N,children:j("Close Window")})]})},af=function(a){var b=a.goToChange,c=a.onDismiss,d=(0,J.Un)().profile,e=(0,h.$G)().t,g=(0,T.Z)(),i=g.fetchWithCatchTxError,j=g.loading,k=G().costs,l=k.numberCakeToUpdate,m=k.numberCakeToReactivate,o=(0,y.kL)(),p=o.signer;if(!d)return null;var r,s=d.isActive?l:m,z=(r=(0,n.Z)(q().mark(function a(){var c;return q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(function(){return p.approve((0,x.Re)(),s.mul(2).toString())});case 2:(null==(c=a.sent)?void 0:c.status)&&b();case 4:case"end":return a.stop()}},a)})),function(){return r.apply(this,arguments)});return(0,f.jsxs)(u.Z,{flexDirection:"column",children:[(0,f.jsxs)(u.Z,{alignItems:"center",justifyContent:"space-between",mb:"24px",children:[(0,f.jsx)(v.Z,{children:e(d.isActive?"Cost to update:":"Cost to reactivate:")}),(0,f.jsxs)(v.Z,{children:[(0,w.dp)(s)," CAKE"]})]}),(0,f.jsx)(t.Z,{disabled:j,isLoading:j,endIcon:j?(0,f.jsx)(R.Z,{spin:!0,color:"currentColor"}):null,width:"100%",mb:"8px",onClick:z,children:e("Enable")}),(0,f.jsx)(t.Z,{variant:"text",width:"100%",onClick:c,disabled:j,children:e("Close Window")})]})},ag=function(a,b){switch(b){case d.START:return a("Edit Profile");case d.CHANGE:return a("Change Profile Pic");case d.REMOVE:return a("Remove Profile Pic");case d.APPROVE:return a("Enable CAKE");default:return""}},ah=function(a){var b=a.onDismiss,c=a.onSuccess,e=m(),i=e.currentView,j=e.goToChange,k=e.goToRemove,l=e.goToApprove,n=e.goPrevious,o=(0,h.$G)().t,p=i===d.START;return(0,f.jsx)(g.Z,{title:ag(o,i),onBack:p?null:function(){return n()},onDismiss:b,hideCloseButton:!p,children:(0,f.jsxs)("div",{style:{maxWidth:"400px"},children:[i===d.START&&(0,f.jsx)(P,{goToApprove:l,goToChange:j,goToRemove:k,onDismiss:b}),i===d.REMOVE&&(0,f.jsx)(V,{onDismiss:b,onSuccess:c}),i===d.CHANGE&&(0,f.jsx)(ae,{onDismiss:b,onSuccess:c}),i===d.APPROVE&&(0,f.jsx)(af,{goToChange:j,onDismiss:b})]})})}}}])