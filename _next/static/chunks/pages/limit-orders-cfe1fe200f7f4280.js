(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4576],{84120:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit-orders",function(){return c(61525)}])},93343:function(a,b,c){"use strict";var d=c(85893),e=c(67294),f=c(73935),g=c(64539),h=c(34701),i=c(93788),j=c(70032),k=c(44147),l=c(89663),m=c(72881),n=c(81641),o=c(86258),p=function(a){var b=a.content,c=a.isOpen,p=a.setIsOpen,q=(0,e.useRef)(null),r=(0,g.Z)(c,350),s=(0,h.Z)().isMobile;if((0,i.Z)(null==q?void 0:q.current,(0,e.useCallback)(function(){return p(!1)},[p])),!r||!s)return null;var t=(0,j.Z)();return t?(0,f.createPortal)((0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.Z,{isUnmounting:!c}),(0,d.jsxs)(o.qt,{ref:q,isUnmounting:!c,children:[(0,d.jsx)(k.Z,{position:"absolute",right:"16px",top:"0",children:(0,d.jsx)(l.Z,{variant:"text",onClick:function(){return p(!1)},children:(0,d.jsx)(n.Z,{})})}),b]})]}),t):null};b.Z=p},78593:function(a,b,c){"use strict";var d=c(26042),e=c(69396),f=c(85893);c(67294);var g=c(44976),h=function(a){return(0,f.jsxs)(g.Z,(0,e.Z)((0,d.Z)({viewBox:"0 0 24 24"},a),{children:[(0,f.jsx)("path",{d:"M5 7C5 6.44772 4.55228 6 4 6C3.44772 6 3 6.44772 3 7V18C3 19.1046 3.89543 20 5 20H20C20.5523 20 21 19.5523 21 19C21 18.4477 20.5523 18 20 18H5V7Z"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 17H7C6.44772 17 6 16.5523 6 16V12C6 11.4477 6.44772 11 7 11H10V10C10 9.44772 10.4477 9 11 9H14V7C14 6.44772 14.4477 6 15 6H19C19.5523 6 20 6.44772 20 7V16C20 16.5523 19.5523 17 19 17ZM16 8H18V15H16V8ZM12 15H14V11H12V15ZM10 13H8V15H10V13Z"})]}))};b.Z=h},53055:function(a,b,c){"use strict";var d=c(26042),e=c(69396),f=c(85893);c(67294);var g=c(44976),h=function(a){return(0,f.jsxs)(g.Z,(0,e.Z)((0,d.Z)({viewBox:"0 0 23 22"},a),{children:[(0,f.jsx)("path",{d:"M21.5 1l-20 20",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.033 19H19.5a1 1 0 100-2H9.033l-2 2zm3-3H18.5a1 1 0 001-1V6.533l-2 2V14h-2v-3.467l-2 2V14h-1.467l-2 2zm.936-8H10.5a1 1 0 00-1 1v.469L10.969 8zm-2 2L5.5 13.469V11a1 1 0 011-1h2.469zM4.5 14.469l-2 2V6a1 1 0 012 0v8.469z"})]}))};b.Z=h},39853:function(a,b,c){"use strict";c.d(b,{Td:function(){return i},Th:function(){return j}});var d=c(7297),e=c(87379),f=c(57247);function g(){var a=(0,d.Z)(["\n  border-bottom: 1px solid ",";\n  color: ",";\n  padding: 16px;\n  vertical-align: middle;\n\n  ","\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  color: ",";\n  font-size: 12px;\n  text-transform: uppercase;\n"]);return h=function(){return a},a}var i=e.ZP.td.withConfig({componentId:"sc-ea0e7240-0"}).withConfig({componentId:"sc-a0ae180c-0"})(g(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.text},f.cp),j=(0,e.ZP)(i).attrs({as:"th"}).withConfig({componentId:"sc-ea0e7240-1"}).withConfig({componentId:"sc-a0ae180c-1"})(h(),function(a){return a.theme.colors.secondary})},44391:function(a,b,c){"use strict";var d=c(7297),e=c(87379),f=c(57247),g=c(39853);function h(){var a=(0,d.Z)(["\n  max-width: 100%;\n  width: 100%;\n\n  tbody tr:last-child {\n    "," {\n      border-bottom: 0;\n    }\n  }\n\n  ","\n"]);return h=function(){return a},a}var i=e.ZP.table.withConfig({componentId:"sc-4fe367f7-0"}).withConfig({componentId:"sc-b0f07fdc-0"})(h(),g.Td,f.Dh);b.Z=i},64539:function(a,b,c){"use strict";var d=c(67294),e=function(a,b){var c=(0,d.useState)(!1),e=c[0],f=c[1];return(0,d.useEffect)(function(){var c;return a&&!e?f(!0):!a&&e&&(c=setTimeout(function(){return f(!1)},b)),function(){return clearTimeout(c)}},[a,b,e]),e};b.Z=e},8008:function(a,b,c){"use strict";var d=c(26042),e=c(69396),f=c(7297),g=c(85893),h=c(67294),i=c(15426),j=c(69589),k=c(44147),l=c(62077),m=c(75943),n=c(92052),o=c(98553),p=c(52775),q=c(87379);function r(){var a=(0,f.Z)(["\n  background: ",";\n  padding-bottom: 24px;\n  padding-top: 24px;\n"]);return r=function(){return a},a}var s=(0,q.ZP)(i.xB).withConfig({componentId:"sc-62a59ff0-0"})(r(),function(a){return a.theme.colors.gradientBubblegum}),t=function(a){var b=a.id,c=a.onSuccess,f=a.onDismiss,q=a.checks,r=a.header,t=a.subtitle,u=(0,h.useState)(q||[]),v=u[0],w=u[1],x=(0,p.$G)().t,y=(0,h.useCallback)(function(a){w(v.map(function(b){return a===b.key?(0,e.Z)((0,d.Z)({},b),{value:!b.value}):b}))},[v]),z=(0,h.useCallback)(function(){c(),f()},[c,f]);return(0,g.jsxs)(i.F0,{title:x("Welcome!"),$minWidth:"320px",id:b,children:[(0,g.jsx)(s,{children:(0,g.jsx)(i.r6,{children:(0,g.jsx)(j.Z,{scale:"lg",children:x("Welcome!")})})}),(0,g.jsxs)(i.fe,{p:"24px",maxWidth:["100%","100%","100%","400px"],children:[(0,g.jsxs)(k.Z,{maxHeight:"300px",overflowY:"auto",children:[(0,g.jsx)(j.Z,{as:"h3",mb:"24px",children:r}),t&&(0,g.jsx)(l.Z,{as:"p",color:"textSubtle",mb:"24px",children:t}),v.map(function(a){return(0,g.jsx)("label",{htmlFor:a.key,style:{display:"block",cursor:"pointer",marginBottom:"24px"},children:(0,g.jsxs)(m.Z,{alignItems:"center",children:[(0,g.jsx)("div",{style:{flex:"none",alignSelf:"flex-start",paddingTop:"8px"},children:(0,g.jsx)(n.Z,{id:a.key,scale:"sm",checked:a.value,onChange:function(){return y(a.key)}})}),(0,g.jsx)(l.Z,{ml:"8px",children:a.content})]})},a.key)})]}),(0,g.jsx)(o.Z,{id:"".concat(b,"-continue"),width:"100%",onClick:z,disabled:v.some(function(a){return!a.value}),children:x("Continue")})]})]})};b.Z=t},22344:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return N}});var d,e,f,g,h=c(26042),i=c(10253),j=c(7297),k=c(85893),l=c(97478),m=c(52775),n=c(87379),o=c(20353),p=c(75943),q=c(44147),r=c(88896),s=c(62077),t=c(95459),u=c(921),v=c(47568),w=c(34051),x=c.n(w),y=c(67294),z=c(28687),A=c(62621),B=c(6680),C=c(33533);function D(){var a=(0,j.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                synced\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return D=function(){return a},a}(E=d||(d={}))[E.OK=0]="OK",E[E.WARNING=1]="WARNING",E[E.NOT_OK=2]="NOT_OK",E[E.UNKNOWN=3]="UNKNOWN";var E,F=function(a){var b=(0,y.useState)({status:d.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),c=b[0],e=b[1];return(0,C.X)(function(b){var c;(c=(0,v.Z)(x().mark(function c(){var f,g,h,j,k,l,m,n;return x().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.t0=i.Z,c.next=4,Promise.all([(0,z.request)(B.AM,(0,z.gql)(D(),a)),b?Promise.resolve(b):A.v.getBlockNumber(),]);case 4:c.t1=c.sent,g=(f=(0,c.t0)(c.t1,2))[0].indexingStatusForCurrentVersion,h=f[1],j="healthy"===g.health,k=parseInt(g.chains[0].chainHeadBlock.number),l=parseInt(g.chains[0].latestBlock.number),m=h-l,n=h-k,!j||m>200||n>200?e({status:d.NOT_OK,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}):m>50||n>50?e({status:d.WARNING,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}):e({status:d.OK,currentBlock:h,chainHeadBlock:k,latestBlock:l,blockDifference:m}),c.next=19;break;case 16:c.prev=16,c.t2=c.catch(0),console.error("Failed to perform health check for ".concat(a," subgraph"),c.t2);case 19:case"end":return c.stop()}},c,null,[[0,16]])})),function(){return c.apply(this,arguments)})()},[a]),c};function G(){var a=(0,j.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return G=function(){return a},a}function H(){var a=(0,j.Z)(["\n  gap: 7px;\n"]);return H=function(){return a},a}function I(){var a=(0,j.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return I=function(){return a},a}var J=(0,n.ZP)(o.Z).withConfig({componentId:"sc-46961c6e-0"})(G()),K=(0,n.ZP)(p.Z).withConfig({componentId:"sc-46961c6e-1"})(H()),L=(0,n.ZP)(q.Z).withConfig({componentId:"sc-46961c6e-2"})(I(),function(a){var b=a.$color,c=a.theme;return c.colors[b]}),M=function(a){var b=a.color,c=a.label,d=a.description,e=a.currentBlock,f=a.secondRemainingBlockSync,g=a.blockNumberFromSubgraph,h=(0,m.$G)().t;return(0,k.jsxs)(q.Z,{children:[(0,k.jsxs)(K,{pb:"10px",children:[(0,k.jsx)(L,{$color:b}),(0,k.jsx)(s.Z,{children:c})]}),(0,k.jsx)(s.Z,{pb:"24px",children:d}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Chain Head Block"),":"]})," ",e]}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Latest Subgraph Block"),":"]})," ",g]}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)("strong",{children:[h("Delay"),":"]})," ",e-g," (",f,"s)"]})]})},N=function(a){var b,c,j,n=a.subgraphName,o=a.inline,p=a.customDescriptions,v=a.obeyGlobalSetting,w=(0,m.$G)().t,x=F(n),y=x.status,z=x.currentBlock,A=x.blockDifference,B=x.latestBlock,C=(0,i.Z)((0,u.YF)(),1),D=C[0],E=y===d.WARNING||y===d.NOT_OK,G=(b=w,c=p,{delayed:{label:b("Delayed"),color:"failure",description:null!==(e=null==c?void 0:c.delayed)&& void 0!==e?e:b("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},slow:{label:b("Slight delay"),color:"warning",description:null!==(f=null==c?void 0:c.slow)&& void 0!==f?f:b("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},healthy:{label:b("Fast"),color:"success",description:null!==(g=null==c?void 0:c.healthy)&& void 0!==g?g:b("No issues with the subgraph.")}}),H=A*l.hJ,I=G[(j=y)===d.NOT_OK?"delayed":j===d.WARNING?"slow":"healthy"],N=(0,r.Z)((0,k.jsx)(M,(0,h.Z)({currentBlock:z,secondRemainingBlockSync:H,blockNumberFromSubgraph:B},I)),{placement:"top"}),O=N.targetRef,P=N.tooltipVisible,Q=N.tooltip;return B&&z&&((void 0===v||v)&&D||E)?o?(0,k.jsxs)(K,{alignItems:"center",justifyContent:"flex-end",ref:O,children:[(0,k.jsx)(L,{$color:I.color}),(0,k.jsx)(s.Z,{children:I.label}),(0,k.jsx)(t.Z,{}),P&&Q]}):(0,k.jsxs)(q.Z,{position:"fixed",bottom:"calc(55px + env(safe-area-inset-bottom))",right:"5%",ref:O,"data-test":"subgraph-health-indicator",children:[P&&Q,(0,k.jsx)(J,{children:(0,k.jsxs)(K,{alignItems:"center",p:"10px",children:[(0,k.jsx)(L,{$color:I.color}),(0,k.jsx)(s.Z,{children:I.label}),(0,k.jsx)(t.Z,{})]})})]}):null}},61525:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return co}});var d,e,f,g,h,i=c(85893),j=c(47568),k=c(10253),l=c(34051),m=c.n(l),n=c(67294),o=c(11163),p=c(36399),q=c(34701),r=c(21812),s=c(75943),t=c(44147),u=c(98553),v=c(98768),w=c(93343),x=c(52775),y=c(941),z=c(38227),A=c(88254),B=c(7447),C=c(74156),D=c(14924),E=c(39499),F=c.n(E),G=c(9473),H=c(46472),I=c(56974),J=c(97477),K=c(73938),L=c(41166),M=c(94293),N=function(a,b){if(!(!a||!b||a.equalTo(0)||b.equalTo(0)))return new H.tA({baseAmount:a,quoteAmount:b})},O=N,P=c(97119),Q=c(68492),R=c(5460),S=c(47330),T=c(91392),U=c(82618),V=function(a,b,c,d,e){if(a&&c&&d){var f=(0,Q.Z)(a,e?c:d),g=(0,Q.Z)(b,e?c:d);if(f&&g){if(e){var h=f.multiply(g.asFraction).multiply(F().exponentiate(I.TY,F().BigInt(c.decimals)));return H.ih.fromRawAmount(c,h.toFixed(0))}var i=f.divide(g.asFraction).multiply(F().exponentiate(I.TY,F().BigInt(c.decimals)));return H.ih.fromRawAmount(c,i.quotient.toString())}}},W=function(a,b,c,d,e){if(a&&c&&d){var f=(0,Q.Z)(a,e?d:c),g=(0,Q.Z)(b,e?c:d);if(g&&f){if(e){var h=f.multiply(F().exponentiate(I.TY,F().BigInt(c.decimals))).divide(g.asFraction);return H.ih.fromRawAmount(d,h.quotient)}var i=f.divide(F().exponentiate(I.TY,F().BigInt(c.decimals))).multiply(g.asFraction);return H.ih.fromRawAmount(d,i.quotient.toString())}}},X=function(){return(0,G.v9)(function(a){return a.limitOrders})},Y=function(){var a=(0,G.I0)(),b=(0,n.useCallback)(function(b,c){a((0,S.j)({field:b,currencyId:c.isToken?c.address:c.isNative?"BNB":""}))},[a]),c=(0,n.useCallback)(function(){a((0,S.KS)())},[a]),d=(0,n.useCallback)(function(b,c){a((0,S.LC)({field:b,typedValue:c}))},[a]),e=(0,n.useCallback)(function(b){a((0,S.sN)({rateType:b}))},[a]);return{onSwitchTokens:c,onCurrencySelection:b,onUserInput:d,onChangeRateType:e}},Z=function(a,b,c,d,e,f,g,h,i){if(!a)return i("Connect Wallet");if(b.input&&b.output&&b.input.address.toLowerCase()===b.output.address.toLowerCase())return i("Order not allowed");if(!(c.input&&c.output))return i("Select a token");var j=e.input||e.output,k=!f||!(null==f?void 0:f.route);if(j&&k)return i("Insufficient liquidity for this trade.");if(!e.input||!e.output)return i("Enter an amount");if(d.input&&d.input.lessThan(e.input))return i("Insufficient %symbol% balance",{symbol:d.input.currency.symbol});if(g){if(h===T.j.MUL&&(g.lessThan(f.executionPrice.asFraction)||g.equalTo(f.executionPrice.asFraction)))return i("Only possible to place sell orders above market rate");if(h===T.j.DIV&&(g.invert().greaterThan(f.executionPrice.invert().asFraction)||g.invert().equalTo(f.executionPrice.invert().asFraction)))return i("Only possible to place buy orders below market rate")}},$=function(){var a,b,c,d,e,f,g,h,i,j,k,l=(0,J.Z)(),m=l.account,o=l.chainId,p=(0,x.$G)().t,q=X(),r=q.independentField,s=q.basisField,t=q.typedValue,u=q[T.g.INPUT],v=u.currencyId,w=q[T.g.OUTPUT],y=w.currencyId,z=q.rateType,A=q.inputValue,B=q.outputValue,C=(0,L.U8)(v),E=(0,L.U8)(y),G=(0,n.useMemo)(function(){return{input:null!=C?C:void 0,output:null!=E?E:void 0}},[C,E]),H=(0,n.useMemo)(function(){return{input:(0,K.pu)(G.input,o),output:(0,K.pu)(G.output,o)}},[G.input,G.output,o]),N=(0,R.K5)(null!=m?m:void 0,[null!=C?C:void 0,null!=E?E:void 0,]),P={input:N[0],output:N[1]},S=(0,n.useMemo)(function(){return(0,Q.Z)(A,null!=C?C:void 0)},[A,C]),U=(0,n.useMemo)(function(){return(0,Q.Z)(B,null!=E?E:void 0)},[B,E]),Y=r===T.g.INPUT,$=s===T.g.OUTPUT,_=r===T.g.PRICE,aa=_?W(A,t,C,E,z===T.j.DIV):void 0,ab=_?V(B,t,C,E,z===T.j.DIV):void 0,ac=_&&aa?null==aa?void 0:aa.toSignificant(6):t,ad=_?void 0:(0,Q.Z)(t,null!==(f=Y?C:E)&& void 0!==f?f:void 0),ae=_?$?U:(0,Q.Z)(ac,E):(0,Q.Z)(t,Y?C:E),af=(0,M.AU)(Y?ae:void 0,E),ag=(0,M.in)(C,!Y||$?ae:void 0),ah=Y?af:ag,ai=(0,Q.Z)("1",G.input),aj=(0,M.AU)(ai,G.output),ak=parseFloat(null==aj?void 0:null===(a=aj.executionPrice)|| void 0===a?void 0:a.toSignificant(6)),al=(0,n.useMemo)(function(){var a,b=null==ah?void 0:ah.inputAmount;return $?r===T.g.INPUT?b=ad:_&&(b=ab):b=S,a=$?U:r===T.g.OUTPUT?ad:_?aa:null==ah?void 0:ah.outputAmount,{input:b,output:a}},[r,ad,S,U,ah,_,$,ab,aa,]),am=(0,n.useMemo)(function(){return O(al.input,al.output)},[al.input,al.output]),an={input:!$&&A&&""!==A?A:null!==(g=null===(b=al.input)|| void 0===b?void 0:b.toSignificant(6))&& void 0!==g?g:"",output:$&&B&&""!==B?B:null!==(h=null===(c=al.output)|| void 0===c?void 0:c.toSignificant(6))&& void 0!==h?h:"",price:r===T.g.PRICE?t:z===T.j.MUL?null!==(i=null==am?void 0:am.toSignificant(6))&& void 0!==i?i:"":null!==(j=null==am?void 0:am.invert().toSignificant(6))&& void 0!==j?j:""},ao=(0,n.useMemo)(function(){var a,b;return{input:C?null===(a=al.input)|| void 0===a?void 0:a.multiply(F().exponentiate(I.TY,F().BigInt(C.decimals))).toFixed(0):void 0,output:E?null===(b=al.output)|| void 0===b?void 0:b.multiply(F().exponentiate(I.TY,F().BigInt(E.decimals))).toFixed(0):void 0}},[C,E,al]);return{currencies:G,currencyBalances:P,inputError:Z(m,H,G,P,al,ah,am,z,p),formattedAmounts:an,trade:null!=ah?ah:void 0,parsedAmounts:al,price:am,rawAmounts:ao,wrappedCurrencies:H,singleTokenPrice:(k={},(0,D.Z)(k,null===(d=H.input)|| void 0===d?void 0:d.address,ak),(0,D.Z)(k,null===(e=H.output)|| void 0===e?void 0:e.address,1/ak),k),currencyIds:{input:v,output:y}}};function _(a){return"string"==typeof a&&"output"===a.toLowerCase()?T.g.OUTPUT:T.g.INPUT}function aa(a){if("string"==typeof a){var b=(0,P.UJ)(a);if(b)return b;if("BNB"===a.toUpperCase()|| !1===b)return"BNB"}return""}var ab,ac,ad=function(a){var b,c,d=aa(a.inputCurrency)||I.VN,e=aa(a.outputCurrency)||I.g$;return d===e&&("string"==typeof a.outputCurrency?d="":e=""),b={},(0,D.Z)(b,T.g.INPUT,{currencyId:d}),(0,D.Z)(b,T.g.OUTPUT,{currencyId:e}),(0,D.Z)(b,"inputValue",""),(0,D.Z)(b,"outputValue",""),(0,D.Z)(b,"typedValue","string"!=typeof(c=a.exactAmount)||Number.isNaN(parseFloat(c))?"":c),(0,D.Z)(b,"independentField",_(a.exactField)),(0,D.Z)(b,"basisField",_(a.exactField)),(0,D.Z)(b,"rateType",T.j.MUL),b},ae=function(){var a=(0,J.Z)().chainId,b=(0,U.TL)(),c=(0,o.useRouter)().query,d=(0,n.useState)(),e=d[0],f=d[1];return(0,n.useEffect)(function(){if(a){var d=ad(c);b((0,S.sQ)(d)),f({inputCurrencyId:d[T.g.INPUT].currencyId,outputCurrencyId:d[T.g.OUTPUT].currencyId})}},[b,a,c]),e},af=c(26042),ag=c(69396),ah=c(2593),ai=c(56906),aj=c(8100),ak=c(36305),al=c(42918),am=c(20877),an=c(58390),ao=c(75472),ap=c.n(ao);(ab=d||(d={}))[ab.Open=0]="Open",ab[ab.History=1]="History",(ac=e||(e={})).OPEN="open",ac.CANCELLED="cancelled",ac.EXECUTED="executed";var aq=["gelato","openOrders"],ar=["gelato","cancelledExecutedOrders"];function as(a,b){return Number(b.updatedAt)-Number(a.updatedAt)}function at(a){return au.apply(this,arguments)}function au(){return(au=(0,j.Z)(m().mark(function a(b){var c,d,e,f,g,h,i,j,l,n;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.gelatoLimitOrders,d=b.chainId,e=b.account,f=b.orders,g=b.syncStatuses,h=(0,am.QR)(d,e),i=(0,am.AG)(h),j=f.filter(function(a){return!i.has((0,am.r6)(a))}),(0,am.ZJ)(d,e,j),l=g?h.filter(function(a){return g.some(function(b){return b===a.status})}):[],a.next=8,Promise.all(l.map(function(a){var b=f.find(function(b){return a.id.toLowerCase()===b.id.toLowerCase()});return b?Promise.resolve([a,b]):c?Promise.allSettled([Promise.resolve(a),c.getOrder(a.id)]):Promise.resolve([a,null])}));case 8:(n=a.sent).forEach(function(a){var b,c,f=(0,k.Z)(a,2),g=f[0],h=f[1];"fulfilled"===g.status&&"fulfilled"===h.status&&(b=g.value,(c=h.value)&&Number(b.updatedAt)<Number(c.updatedAt)&&(0,am.TR)(d,e,h.value)),"rejected"===h.status&&console.error("Error fetching order from subgraph",h.reason)});case 10:case"end":return a.stop()}},a)}))).apply(this,arguments)}var av=function(a){var b=(0,J.Z)(),c=b.account,d=b.chainId,f=(0,an.Z)(),g=a&&f&&c&&d,h=(0,aj.ZP)(g?aq:null,(0,j.Z)(m().mark(function a(){var b,g,h;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.getOpenOrders(c.toLowerCase(),!1);case 3:return b=a.sent,a.next=6,at({orders:b,chainId:d,account:c,syncStatuses:[e.OPEN],gelatoLimitOrders:f});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error("Error fetching open orders from subgraph",a.t0);case 11:return g=(0,am.QR)(d,c).filter(function(a){return a.status===e.OPEN}),h=(0,am.QR)(d,c,!0),a.abrupt("return",(0,ak.Z)(g.filter(function(a){return!h.filter(function(a){return a.status===e.CANCELLED}).find(function(b){return b.id.toLowerCase()===a.id.toLowerCase()})})).concat((0,ak.Z)(h.filter(function(a){return a.status===e.OPEN}))).sort(as));case 14:case"end":return a.stop()}},a,null,[[0,8]])})),{refreshInterval:al.KI}).data;return g?h:[]},aw=function(a){var b=(0,J.Z)(),c=b.account,d=b.chainId,f=(0,an.Z)(),g=a&&f&&c&&d,h=(0,aj.ZP)(g?ar:null,(0,j.Z)(m().mark(function a(){var b,g,h,i,j,l,n;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,b=c.toLowerCase(),a.t0=k.Z,a.next=5,Promise.all([f.getCancelledOrders(b,!1),f.getExecutedOrders(b,!1),]);case 5:return a.t1=a.sent,h=(g=(0,a.t0)(a.t1,2))[0],i=g[1],a.next=11,at({orders:(0,ak.Z)(h).concat((0,ak.Z)(i)),chainId:d,account:c});case 11:a.next=16;break;case 13:a.prev=13,a.t2=a.catch(0),console.error("Error fetching history orders from subgraph",a.t2);case 16:return j=(0,am.QR)(d,c).filter(function(a){return a.status===e.EXECUTED}),l=(0,am.QR)(d,c).filter(function(a){return a.status===e.CANCELLED}),n=(0,am.QR)(d,c,!0).filter(function(a){return a.status===e.CANCELLED}),a.abrupt("return",(0,ak.Z)(n).concat((0,ak.Z)(l),(0,ak.Z)(j)).sort(as));case 20:case"end":return a.stop()}},a,null,[[0,13]])})),{refreshInterval:al.KI}).data;return g?h:[]},ax=function(){var a,b,c,d=(0,J.Z)(),e=d.chainId,f=d.account,g=(0,aj.kY)().mutate,h=(0,an.Z)(),i=(0,ai.h7)(),k=Y(),l=k.onSwitchTokens,o=k.onCurrencySelection,p=k.onUserInput,q=k.onChangeRateType,r=(0,n.useCallback)((a=(0,j.Z)(m().mark(function a(b,c){var d,f,j,k,l,n;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h){a.next=2;break}throw Error("Could not reach Gelato Limit Orders library");case 2:if(e){a.next=4;break}throw Error("No chainId");case 4:if(null==h?void 0:h.signer){a.next=6;break}throw Error("No signer");case 6:return a.next=8,h.encodeLimitOrderSubmissionWithSecret(b.inputToken,b.outputToken,b.inputAmount,b.outputAmount,b.owner);case 8:return f=(d=a.sent).witness,j=d.payload,k=d.order,a.next=14,h.signer.sendTransaction((0,ag.Z)((0,af.Z)({},null!=c?c:{}),{to:j.to,data:j.data,value:ah.O$.from(j.value)}));case 14:return l=a.sent,n=Math.round(Date.now()/1e3),i(l,{summary:"Order submission",translatableSummary:{text:"Order submission"},type:"limit-order-submission",order:(0,ag.Z)((0,af.Z)({},k),{createdTxHash:null==l?void 0:l.hash.toLowerCase(),witness:f,status:"open",updatedAt:n.toString()})}),g(aq),g(ar),a.abrupt("return",l);case 20:case"end":return a.stop()}},a)})),function(b,c){return a.apply(this,arguments)}),[i,e,h,g]),s=(0,n.useCallback)((b=(0,j.Z)(m().mark(function a(b,c,d){var j,k,l,n;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h){a.next=2;break}throw Error("Could not reach Gelato Limit Orders library");case 2:if(e){a.next=4;break}throw Error("No chainId");case 4:if(f){a.next=6;break}throw Error("No account");case 6:return j=Boolean(b.module&&b.inputToken&&b.owner&&b.witness&&b.data),a.next=9,h.cancelLimitOrder(b,j,null!=d?d:{gasLimit:2e6});case 9:return k=a.sent,l=Math.round(Date.now()/1e3),i(k,{summary:n=c?"Order cancellation: ".concat(c.inputAmount," ").concat(c.inputTokenSymbol," for ").concat(c.outputAmount," ").concat(c.outputTokenSymbol):"Order cancellation",type:"limit-order-cancellation",order:(0,ag.Z)((0,af.Z)({},b),{updatedAt:l.toString(),status:"cancelled",cancelledTxHash:null==k?void 0:k.hash.toLowerCase()})}),g(aq),g(ar),a.abrupt("return",k);case 16:case"end":return a.stop()}},a)})),function(a,c,d){return b.apply(this,arguments)}),[h,e,f,i,g]),t=(0,n.useCallback)(function(a,b){p(a,b)},[p]),u=(0,n.useCallback)(function(a,b){o(a,b)},[o]),v=(0,n.useCallback)(function(){l()},[l]),w=(0,n.useCallback)((c=(0,j.Z)(m().mark(function a(b,c){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b===T.j.MUL?(c&&p(T.g.PRICE,c.invert().toSignificant(6)),q(T.j.DIV)):(c&&p(T.g.PRICE,c.toSignificant(6)),q(T.j.MUL));case 1:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}),[q,p]);return{handleLimitOrderSubmission:r,handleLimitOrderCancellation:s,handleInput:t,handleCurrencySelection:u,handleSwitchTokens:v,handleRateType:w}},ay=function(){var a=$(),b=X();return{handlers:ax(),derivedOrderInfo:a,orderState:b}},az=c(32112),aA=c(921),aB=c(19915),aC=c(63850),aD=c(94544),aE=c(11372),aF=c(32288),aG=c(29315),aH=c(8008),aI=(0,n.memo)(function(){var a=(0,x.$G)().t,b=(0,k.Z)((0,aA.$c)(),2),c=b[0],d=b[1],e=(0,k.Z)((0,r.Z)((0,i.jsx)(aH.Z,{id:"disclaimer-limit-order",header:a("I acknowledge that:"),checks:[{key:"price-checkbox",content:a("I understand that small orders are executed at higher execution price due to gas fees.")},{key:"taxtoken-checkbox",content:a("I understand that using taxed tokens on limit orders is highly discouraged and not recommended - Taxed tokens can be stuck in limit orders and lost forever because of impossibility to execute an order for such tokens")},],onSuccess:function(){return d(!0)}}),!1,!1),2),f=e[0],g=e[1];return(0,n.useEffect)(function(){return c||f(),function(){g()}},[c]),null}),aJ=c(7297),aK=c(87379);function aL(){var a=(0,aJ.Z)(["\n  position: relative;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1rem;\n"]);return aL=function(){return a},a}function aM(){var a=(0,aJ.Z)(["\n  flex-shrink: 0;\n  height: fit-content;\n  padding: 0 24px;\n\n  "," {\n    padding: 0 40px;\n  }\n\n  "," {\n    ",";\n  }\n"]);return aM=function(){return a},a}function aN(){var a=(0,aJ.Z)(["\n  width: 328px;\n"]);return aN=function(){return a},a}var aO=(0,aK.ZP)(s.Z).withConfig({componentId:"sc-8e2c23ef-0"})(aL()),aP=(0,aK.ZP)(s.Z).withConfig({componentId:"sc-8e2c23ef-1"})(aM(),function(a){return a.theme.mediaQueries.lg},function(a){return a.theme.mediaQueries.xxl},function(a){return a.$isChartExpanded?"padding: 0 120px":"padding: 0 40px"}),aQ=(0,aK.ZP)(t.Z).withConfig({componentId:"sc-8e2c23ef-2"})(aN()),aR=c(89663),aS=c(53055),aT=c(78593),aU=c(69589),aV=c(66806),aW=c(62077),aX=c(56691);function aY(){var a=(0,aJ.Z)(["\n  flex-direction: column;\n  align-items: center;\n  padding: 24px;\n  width: 100%;\n  border-bottom: 1px solid ",";\n"]);return aY=function(){return a},a}function aZ(){var a=(0,aJ.Z)(["\n  color: ",";\n"]);return aZ=function(){return a},a}var a$,a_=(0,aK.ZP)(s.Z).withConfig({componentId:"sc-51532107-0"})(aY(),function(a){return a.theme.colors.cardBorder}),a0=(0,aK.ZP)(aR.Z).withConfig({componentId:"sc-51532107-1"})(aZ(),function(a){return a.theme.colors.textSubtle}),a1=function(a){var b=a.title,c=a.subtitle,d=a.setIsChartDisplayed,e=a.isChartDisplayed,f=function(){d(function(a){return!a})},g=(0,k.Z)((0,r.Z)((0,i.jsx)(aX.Z,{})),1),h=g[0];return(0,i.jsxs)(a_,{children:[(0,i.jsxs)(s.Z,{width:"100%",alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(s.Z,{flex:"1",children:d&&(0,i.jsx)(a0,{onClick:f,variant:"text",scale:"sm",children:e?(0,i.jsx)(aS.Z,{color:"textSubtle"}):(0,i.jsx)(aT.Z,{width:"24px",color:"textSubtle"})})}),(0,i.jsx)(s.Z,{flex:"1",justifyContent:"center",children:(0,i.jsx)(aU.Z,{as:"h2",children:b})}),(0,i.jsx)(s.Z,{flex:"1",justifyContent:"flex-end",children:(0,i.jsx)(aR.Z,{onClick:h,variant:"text",scale:"sm",children:(0,i.jsx)(aV.Z,{color:"textSubtle",width:"24px"})})})]}),(0,i.jsx)(s.Z,{alignItems:"center",children:(0,i.jsx)(aW.Z,{color:"textSubtle",fontSize:"14px",children:c})})]})},a2=c(32762),a3=c(88896),a4=c(63771),a5=c(20363),a6=c(95160);(a$=f||(f={})).ABOVE="above",a$.BELOW="below",a$.MARKET="market";var a7=function(a,b){if(a){if(a.equalTo(0))return[b("at market price"),f.MARKET];var c=parseFloat(a.toSignificant(6)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2});return a.lessThan("0")?[b("%percentage%% below market",{percentage:c}),f.BELOW]:[b("%percentage%% above market",{percentage:c}),f.ABOVE]}return[null,null]};function a8(){var a=(0,aJ.Z)(["\n  text-align: right;\n"]);return a8=function(){return a},a}function a9(){var a=(0,aJ.Z)(["\n  cursor: pointer;\n"]);return a9=function(){return a},a}var ba=RegExp("^\\d*(?:\\\\[.])?\\d*$"),bb=(0,aK.ZP)(a2.Z).withConfig({componentId:"sc-595efb6e-0"})(a8()),bc=(0,aK.ZP)(s.Z).withConfig({componentId:"sc-595efb6e-1"})(a9()),bd=(g={},(0,D.Z)(g,f.ABOVE,"success"),(0,D.Z)(g,f.BELOW,"failure"),(0,D.Z)(g,f.MARKET,"textSubtle"),g),be=function(a){var b,c=a.id,d=a.value,e=a.onUserInput,f=a.inputCurrency,g=a.outputCurrency,h=a.percentageRateDifference,j=a.rateType,l=a.handleRateType,m=a.price,n=a.handleResetToMarketPrice,o=a.realExecutionPriceAsString,p=a.disabled,q=(0,x.$G)().t,r=j===T.j.MUL?"".concat(null==g?void 0:g.symbol," per ").concat(null==f?void 0:f.symbol):"".concat(null==f?void 0:f.symbol," per ").concat(null==g?void 0:g.symbol),t=function(){l(j,m)},v=(0,a3.Z)((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aW.Z,{children:q("The real execution price includes the gas cost necessary to execute your order and guarantees that your order will be executed at the desired price.")}),(0,i.jsx)(aW.Z,{children:q("It fluctuates according to gas prices when the order is getting executed.")}),(null==f?void 0:f.symbol)&&(null==g?void 0:g.symbol)&&o&&(0,i.jsx)(aW.Z,{children:"never executes"===o?q("Assuming the current gas price, this order will never be executed. Try increasing the number of tokens to swap in your order."):q("Assuming current gas price it should execute when 1 %assetOneSymbol% = %price% %assetTwoSymbol%",{assetOneSymbol:j===T.j.MUL?null==f?void 0:f.symbol:null==g?void 0:g.symbol,assetTwoSymbol:j===T.j.MUL?null==g?void 0:g.symbol:null==f?void 0:f.symbol,price:o})})]}),{placement:"top"}),w=v.targetRef,y=v.tooltip,z=v.tooltipVisible,A=function(a){var b=a.target.value.replace(/,/g,".");(""===b||ba.test((0,P.hr)(b)))&&e(b)},B=null===(b=null==h?void 0:h.equalTo(0))|| void 0===b||b,C=(0,k.Z)(a7(h,q),2),D=C[0],E=C[1],F=bd[E],G="never executes"===o?q("never executes"):o;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,{justifyContent:"space-between",id:c,children:[(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(aW.Z,{mr:"8px",color:"secondary",fontSize:"12px",bold:!0,textTransform:"uppercase",children:q("Price")}),(0,i.jsx)(u.Z,{onClick:n,startIcon:(0,i.jsx)(a4.Z,{color:B?"textDisabled":"primary"}),variant:"secondary",scale:"xs",disabled:B,children:(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,color:B?"textDisabled":"primary",textTransform:"uppercase",children:q("Market")})})]}),D&&(0,i.jsx)(aW.Z,{color:F,fontSize:"12px",children:D})]}),(0,i.jsx)(bb,{value:d,disabled:p,onChange:A,autoComplete:"off",autoCorrect:"off",pattern:"^[0-9]*[.,]?[0-9]*$",minLength:1,maxLength:79,spellCheck:"false",type:"text",inputMode:"decimal"}),f&&g&&(0,i.jsxs)(bc,{justifyContent:"flex-end",alignItems:"center",onClick:t,children:[(0,i.jsx)(aW.Z,{small:!0,bold:!0,children:r}),(0,i.jsx)(a5.Z,{color:"textSubtle",width:"24px",ml:"4px"})]}),(0,i.jsx)(s.Z,{justifySelf:"flex-end",mb:"8px",minHeight:"16px",children:o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aW.Z,{small:!0,color:"textSubtle",mr:"4px",children:q("Real execution price: %price%",{price:G})}),(0,i.jsxs)("span",{ref:w,children:[(0,i.jsx)(a6.Z,{color:"textSubtle"}),z&&y]})]})})]})},bf=c(45203),bg=c(40589),bh=c(30445);function bi(){var a=(0,aJ.Z)(["\n  box-shadow: inset 0px -2px 0px rgba(0, 0, 0, 0.2);\n  .icon-up-down {\n    display: none;\n  }\n  &:hover {\n    background-color: ",";\n    .icon-down {\n      display: none;\n      fill: white;\n    }\n    .icon-up-down {\n      display: block;\n      fill: white;\n    }\n  }\n"]);return bi=function(){return a},a}var bj=(0,aK.ZP)(aR.Z).withConfig({componentId:"sc-43ef73af-0"})(bi(),function(a){return a.theme.colors.primary}),bk=function(a){var b=a.handleSwitchTokens,c=a.color,d=(0,n.useCallback)(function(){return null==b?void 0:b()},[b]);return(0,i.jsx)(y.Tz,{justify:"space-between",children:(0,i.jsx)(bh.BA,{justify:"center",style:{padding:"0 1rem"},children:(0,i.jsxs)(bj,{variant:"light",scale:"sm",onClick:d,children:[(0,i.jsx)(bf.Z,{className:"icon-down",color:c}),(0,i.jsx)(bg.Z,{className:"icon-up-down",color:c})]})})})},bl=c(26118),bm=c(20353),bn=c(12587),bo=c(51983);function bp(){var a=(0,aJ.Z)(["\n  & > div {\n    width: 100%;\n    background-color: ",";\n    border: 0;\n  }\n  & button {\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n  }\n"]);return bp=function(){return a},a}var bq=aK.ZP.div.withConfig({componentId:"sc-335004fc-0"})(bp(),function(a){return a.theme.colors.input}),br=function(a){var b=a.activeIndex,c=a.onItemClick,d=(0,aC.ZP)().theme,e=(0,x.$G)().t;return(0,i.jsx)(bq,{children:(0,i.jsx)(bn.Z,{activeIndex:b,onItemClick:c,children:[e("Open Orders"),e("Order History")].map(function(a,c){return(0,i.jsx)(bo.Z,{style:{color:c===b?d.colors.text:d.colors.textSubtle,backgroundColor:c===b?d.card.background:d.colors.input},children:a},a)})})})},bs=c(44391),bt=c(39853),bu=c(37303),bv=function(a){if(a)return parseFloat(a.toSignificant(18)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:8})},bw=function(a){var b,c=(0,J.Z)().chainId,d=(0,an.Z)(),f=(0,L.U8)(a.inputToken),g=(0,L.U8)(a.outputToken),h=(0,ai.ub)(a.createdTxHash),i=(0,ai.ub)(null!==(b=a.cancelledTxHash)&& void 0!==b?b:void 0),j=(0,n.useMemo)(function(){if(f&&a.inputAmount)return H.ih.fromRawAmount(f,a.inputAmount)},[f,a.inputAmount]),k=(0,n.useMemo)(function(){return a.adjustedMinReturn?a.adjustedMinReturn:d&&c&&a.minReturn?d.getAdjustedMinReturn(a.minReturn):void 0},[c,d,a.adjustedMinReturn,a.minReturn]),l=(0,n.useMemo)(function(){if(g&&k)return H.ih.fromRawAmount(g,k)},[g,k]),m=(0,n.useMemo)(function(){return O(j,l)},[j,l]);return{inputToken:f,outputToken:g,inputAmount:bv(j),outputAmount:bv(l),executionPrice:bv(m),invertedExecutionPrice:bv(null==m?void 0:m.invert()),isOpen:a.status===e.OPEN,isCancelled:a.status===e.CANCELLED,isExecuted:a.status===e.EXECUTED,isSubmissionPending:h,isCancellationPending:i,bscScanUrls:{created:a.createdTxHash?(0,P.C)(a.createdTxHash,"transaction"):null,executed:a.executedTxHash?(0,P.C)(a.executedTxHash,"transaction"):null,cancelled:a.cancelledTxHash?(0,P.C)(a.cancelledTxHash,"transaction"):null}}},bx=c(44787),by=function(a){var b=a.icon,c=a.text,d=a.bold;return(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(aW.Z,{color:"text",mr:"8px",bold:void 0!==d&&d,textTransform:"uppercase",children:c}),b]})},bz=function(a){var b=a.currency,c=a.bold;return(0,i.jsx)(by,{bold:c,text:null==b?void 0:b.symbol,icon:(0,i.jsx)(bx.Z,{currency:b})})},bA=c(85937),bB=c(22769),bC=c(69136),bD=c(38695),bE=function(a){var b=a.firstRow,c=a.secondRow;return(0,i.jsxs)(t.Z,{children:[(0,i.jsx)(t.Z,{mb:"4px",children:b}),(0,i.jsx)(t.Z,{children:c})]})},bF=c(27208),bG=function(){var a=(0,x.$G)().t;return(0,i.jsx)(bF.Z,{variant:"warning",mt:"24px",children:(0,i.jsxs)(bF.Y,{children:[(0,i.jsx)("b",{children:a("Real Execution Price:")}),(0,i.jsxs)("ol",{children:[(0,i.jsx)("li",{children:a("Your execution gas fees are paid for by the spread between your specified price and the real execution price.")}),(0,i.jsx)("li",{children:a("Gas fees are volatile and thus the exact market price at which your order will execute is unpredictable.")}),(0,i.jsx)("li",{children:a("It might take much longer than you expected to reach the price that fills your order + fees.")})]}),(0,i.jsx)("br",{}),(0,i.jsx)("b",{children:a('"Fee on Transfer" Tokens')}),(0,i.jsx)("ol",{children:(0,i.jsx)("li",{children:a('"Fee on transfer" tokens should not be used with Limit Orders (use at your own risk)')})})]})})};function bH(){var a=(0,aJ.Z)(["\n  border-radius: 10px\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return bH=function(){return a},a}var bI,bJ=aK.ZP.div.withConfig({componentId:"sc-940bf4bf-0"})(bH(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.background}),bK=function(a){var b,c,d,e,f,g,h=a.onDismiss,j=a.order,k=a.formattedOrder,l=(0,J.Z)().chainId,m=(0,aC.ZP)().theme,o=(0,x.$G)().t,p=ax().handleLimitOrderCancellation,r=(0,q.Z)().isMobile,t=(0,n.useState)({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:void 0}),v=t[0],w=v.cancellationErrorMessage,y=v.attemptingTxn,z=v.txHash,A=t[1],B=(0,n.useCallback)(function(){var a,b;p&&(A({attemptingTxn:!0,cancellationErrorMessage:void 0,txHash:void 0}),p(j,(null===(a=k.inputToken)|| void 0===a?void 0:a.symbol)&&(null===(b=k.outputToken)|| void 0===b?void 0:b.symbol)&&k.inputAmount&&k.outputAmount?{inputTokenSymbol:k.inputToken.symbol,outputTokenSymbol:k.outputToken.symbol,inputAmount:k.inputAmount,outputAmount:k.outputAmount}:void 0).then(function(a){A({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:a.hash})}).catch(function(a){A({attemptingTxn:!1,cancellationErrorMessage:a.message,txHash:void 0})}))},[p,k.inputAmount,k.outputAmount,null===(b=k.inputToken)|| void 0===b?void 0:b.symbol,null===(c=k.outputToken)|| void 0===c?void 0:c.symbol,j,]),C="1 ".concat(null===(d=k.inputToken)|| void 0===d?void 0:d.symbol," = ").concat(k.executionPrice," ").concat(null===(e=k.outputToken)|| void 0===e?void 0:e.symbol),D="1 ".concat(null===(f=k.outputToken)|| void 0===f?void 0:f.symbol," = ").concat(k.invertedExecutionPrice," ").concat(null===(g=k.inputToken)|| void 0===g?void 0:g.symbol),E=k.isOpen,F=k.isExecuted,G=k.isCancelled,H=k.isSubmissionPending,I=k.isCancellationPending,K=k.bscScanUrls,L=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,{width:"100%",justifyContent:"space-between",children:[(0,i.jsx)(bE,{firstRow:(0,i.jsx)(aW.Z,{children:k.inputAmount}),secondRow:(0,i.jsx)(bz,{currency:k.inputToken})}),(0,i.jsx)(bu.Z,{}),(0,i.jsx)(bE,{firstRow:(0,i.jsx)(aW.Z,{children:k.outputAmount}),secondRow:(0,i.jsx)(bz,{currency:k.outputToken})})]}),(0,i.jsx)(bL,{currentPriceExchangeRateText:"0.002474 BNB = 1 BUSD",currentPriceExchangeRateTextReversed:"404.11169 BUSD = 1 BNB",limitPriceExchangeRateText:C,limitPriceExchangeRateTextReversed:D,isOpen:E,isExecuted:F,isCancelled:G,isSubmissionPending:H,isCancellationPending:I}),(0,i.jsx)(bG,{}),(0,i.jsxs)(s.Z,{flexDirection:"column",children:[E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:k.bscScanUrls.created,children:o("View on BscScan")}),!H&&(0,i.jsx)(u.Z,{variant:"danger",mt:"16px",onClick:B,children:o("Cancel Order")})]}):(0,i.jsx)(u.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:k.bscScanUrls.created,children:o("View order creation on BSCScan")}),G&&K.cancelled&&(0,i.jsx)(u.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:K.cancelled,children:o("View order cancellation on BSCScan")}),F&&K.executed&&(0,i.jsx)(u.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:K.executed,children:o("View order execution on BSCScan")})]})]});return(0,i.jsx)(bA.Z,{title:o("Open Order Details"),headerBackground:m.colors.gradientCardHeader,style:{width:r?"100%":"436px"},onDismiss:h,children:y?(0,i.jsx)(bM,{}):z?(0,i.jsx)(bD.rD,{chainId:l,hash:z,onDismiss:h}):w?(0,i.jsx)(bD.ht,{onDismiss:h,message:w}):L})},bL=(0,n.memo)(function(a){var b=a.limitPriceExchangeRateText,c=a.limitPriceExchangeRateTextReversed,d=a.isOpen,e=a.isExecuted,f=a.isCancelled,g=a.isSubmissionPending,h=a.isCancellationPending,j=(0,x.$G)().t;return(0,i.jsx)(bJ,{children:(0,i.jsxs)(t.Z,{mb:"4px",children:[d&&g&&(0,i.jsx)(bB.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:j("Pending")}),e&&(0,i.jsx)(bB.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"success",children:j("Filled")}),h&&(0,i.jsx)(bB.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:j("Cancelling")}),f&&!h&&(0,i.jsx)(bB.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"failure",children:j("Cancelled")}),(0,i.jsx)(aW.Z,{fontSize:"14px",color:"textSubtle",children:j("Limit Price")}),(0,i.jsxs)(s.Z,{flexDirection:"column",children:[(0,i.jsx)(aW.Z,{fontSize:"14px",children:b}),(0,i.jsx)(aW.Z,{fontSize:"14px",children:c})]})]})})}),bM=(0,n.memo)(function(){var a=(0,x.$G)().t;return(0,i.jsxs)(s.Z,{children:[(0,i.jsxs)(s.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,i.jsx)(aW.Z,{fontSize:"20px",small:!0,color:"secondary",children:a("Confirm")}),(0,i.jsx)(aW.Z,{small:!0,color:"textSubtle",mt:"8px",children:a("Please confirm the transaction in your wallet")})]}),(0,i.jsx)(s.Z,{children:(0,i.jsx)(bC.Z,{size:70})})]})});(bI=h||(h={})).TAG="Tag",bI.TEXT="Text";var bN=function(a){var b=a.element,c=a.text,d=a.color;return b===h.TAG?(0,i.jsx)(bB.Z,{outline:!0,scale:"sm",variant:d,ml:"auto",children:c}):(0,i.jsx)(aW.Z,{color:d,children:c})},bO=function(a){var b=a.formattedOrder,c=a.showOpenTag,d=a.element,e=void 0===d?h.TAG:d,f=(0,x.$G)().t,g=b.isOpen,j=b.isSubmissionPending,k=b.isCancelled,l=b.isCancellationPending,m=b.isExecuted;return g&&!j&& void 0!==c&&c?(0,i.jsx)(bN,{element:e,text:f("Open"),color:"success"}):g&&j?(0,i.jsx)(bN,{element:e,text:f("Pending"),color:"warning"}):k&&!l?(0,i.jsx)(bN,{element:e,text:f("Cancelled"),color:"failure"}):l?(0,i.jsx)(bN,{element:e,text:f("Cancelling"),color:"warning"}):m?(0,i.jsx)(bN,{element:e,text:f("Filled"),color:"success"}):null},bP=function(a){var b=a.order,c=(0,x.$G)().t,d=bw(b),e=d.inputToken,f=d.outputToken,g=d.inputAmount,h=d.outputAmount,j=d.executionPrice,l=(0,k.Z)((0,r.Z)((0,i.jsx)(bK,{order:b,formattedOrder:d})),1),m=l[0];return(0,i.jsx)(s.Z,{width:"100%",justifyContent:"center",alignItems:"center",onClick:m,children:(0,i.jsxs)(t.Z,{width:"100%",children:[(0,i.jsxs)(s.Z,{mb:"16px",children:[(0,i.jsx)(bz,{bold:!0,currency:e}),(0,i.jsx)(bu.Z,{color:"textSubtle"}),(0,i.jsx)(bz,{bold:!0,currency:f}),(0,i.jsx)(bO,{formattedOrder:d})]}),(0,i.jsxs)(s.Z,{justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:c("From")}),(0,i.jsx)(aW.Z,{small:!0,textTransform:"uppercase",children:"".concat(g," ").concat(null==e?void 0:e.symbol)})]}),(0,i.jsxs)(s.Z,{justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:c("To")}),(0,i.jsx)(aW.Z,{small:!0,textTransform:"uppercase",children:"".concat(h," ").concat(null==f?void 0:f.symbol)})]}),(0,i.jsxs)(s.Z,{justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:c("Price")}),(0,i.jsx)(aW.Z,{small:!0,children:"".concat(j," ").concat(null==f?void 0:f.symbol," per ").concat(null==e?void 0:e.symbol)})]})]})})};function bQ(){var a=(0,aJ.Z)(["\n  cursor: pointer;\n\n  &:hover {\n    background: ",";\n  }\n"]);return bQ=function(){return a},a}var bR=aK.ZP.tr.withConfig({componentId:"sc-a6176c36-0"})(bQ(),function(a){return a.theme.colors.backgroundDisabled}),bS=function(a){var b=a.orders;return(0,i.jsx)(bs.Z,{children:(0,i.jsx)("tbody",{children:b.map(function(a){return(0,i.jsx)(bR,{children:(0,i.jsx)(bt.Td,{children:(0,i.jsx)(bP,{order:a})})},a.id)})})})},bT=(0,n.memo)(bS),bU=c(84815),bV=function(a){var b=a.order,c=bw(b),d=c.inputToken,e=c.outputToken,f=c.inputAmount,g=c.outputAmount,j=c.executionPrice,l=(0,k.Z)((0,r.Z)((0,i.jsx)(bK,{order:b,formattedOrder:c})),1),m=l[0];return(0,i.jsxs)("tr",{children:[(0,i.jsx)(bt.Td,{children:(0,i.jsx)(bE,{firstRow:f,secondRow:(0,i.jsx)(bz,{bold:!0,currency:d})})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(bE,{firstRow:g,secondRow:(0,i.jsx)(bz,{bold:!0,currency:e})})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(bE,{firstRow:j,secondRow:(0,i.jsx)(by,{text:"".concat(null==e?void 0:e.symbol,"/").concat(null==d?void 0:d.symbol),icon:(0,i.jsx)(a5.Z,{})})})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(bO,{formattedOrder:c,showOpenTag:!0,element:h.TEXT})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(aR.Z,{variant:"text",onClick:m,children:(0,i.jsx)(bU.Z,{})})})]})},bW=function(a){var b=a.orders,c=(0,x.$G)().t;return(0,i.jsx)(bs.Z,{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)(bt.Th,{children:(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:c("From")})}),(0,i.jsx)(bt.Th,{children:(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:c("To")})}),(0,i.jsx)(bt.Th,{children:(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:c("Limit Price")})}),(0,i.jsx)(bt.Th,{children:(0,i.jsx)(aW.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:c("Status")})}),(0,i.jsx)(bt.Th,{})]})}),(0,i.jsx)("tbody",{children:b.map(function(a){return(0,i.jsx)(bV,{order:a},a.id)})})]})})},bX=(0,n.memo)(bW),bY=c(66260),bZ=c(87844),b$=c(18029),b_=c(22344),b0=c(55787),b1=function(a){var b=a.orderCategory,c=(0,x.$G)().t;return(0,i.jsxs)(s.Z,{p:"24px",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,i.jsx)(b0.Z,{width:64}),(0,i.jsx)(aW.Z,{color:"textDisabled",children:c(b===d.Open?"No Open Orders":"No Order History")})]})},b2=c(62685),b3=function(){return(0,i.jsx)(bs.Z,{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})}),(0,i.jsx)(bt.Td,{children:(0,i.jsx)(b2.Z,{})})]})]})})},b4=(0,n.memo)(b3);function b5(){var a=(0,aJ.Z)(["\n  color: ",";\n  padding: 0 20px;\n  :hover {\n    cursor: pointer;\n  }\n"]);return b5=function(){return a},a}var b6=aK.ZP.div.withConfig({componentId:"sc-d6270113-0"})(b5(),function(a){return a.theme.colors.primary}),b7=function(a){var b=a.data,c=a.orderCategory,d=a.itemsPerPage,e=void 0===d?5:d,f=a.children,g=(0,x.$G)().t,h=(0,n.useState)(1),j=h[0],k=h[1],l=Array.isArray(b)?b.length:0,m=(0,n.useMemo)(function(){return l?Math.ceil(l/e):1},[l,e]),o=(0,n.useCallback)(function(){k(function(a){return a===m?a:a+1})},[m]),p=(0,n.useCallback)(function(){k(function(a){return 1===a?a:a-1})},[]),q=(0,n.useMemo)(function(){return e*(j-1)},[j,e]),r=(0,n.useMemo)(function(){return e*j},[j,e]),u=(0,n.useMemo)(function(){return Array.isArray(b)?b.slice(q,r):[]},[b,q,r]);return(0,n.useEffect)(function(){k(1)},[c]),(0,i.jsxs)(i.Fragment,{children:[f({paginatedData:u}),!b&&(0,i.jsx)(b4,{}),b&&!l&&(0,i.jsx)(b1,{orderCategory:c}),(0,i.jsxs)(bY.Z,{gridGap:"16px",gridTemplateColumns:["1fr",null,null,null,"1fr 2fr 1fr"],mt:"16px",mb:"16px",px:"16px",children:[(0,i.jsx)(t.Z,{}),(0,i.jsxs)(s.Z,{width:"100%",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(b6,{onClick:p,children:(0,i.jsx)(bZ.Z,{color:1===j?"textDisabled":"primary"})}),(0,i.jsx)(aW.Z,{children:g("Page %page% of %maxPage%",{page:j,maxPage:m})}),(0,i.jsx)(b6,{onClick:o,children:(0,i.jsx)(b$.Z,{color:j===m?"textDisabled":"primary"})})]}),(0,i.jsx)(s.Z,{width:"100%",justifyContent:["center",null,null,null,"flex-end"],children:(0,i.jsx)(b_.default,{subgraphName:"gelatodigital/limit-orders-bsc",inline:!0})})]})]})},b8=(0,n.memo)(b7),b9=(0,n.memo)(function(a){var b,c,e,f,g=a.orderCategory,h=a.isCompact,j=(c=aw((b=g)===d.History),e=av(b===d.Open),f=(0,n.useMemo)(function(){return b===d.Open?e:c},[b,e,c]),(0,n.useMemo)(function(){return Array.isArray(f)?ap()(f,function(a){return parseInt(a.createdAt)},"desc"):f},[f]));return(0,i.jsx)(b8,{data:j,orderCategory:g,children:function(a){var b=a.paginatedData;return h?(0,i.jsx)(bT,{orders:b}):(0,i.jsx)(bX,{orders:b})}})}),ca=function(a){var b=a.isCompact,c=(0,n.useState)(d.Open),e=c[0],f=c[1],g=(0,n.useCallback)(function(a){return f(a)},[]);return(0,i.jsx)(s.Z,{flex:"1",justifyContent:"center",mb:"24px",children:(0,i.jsxs)(bm.Z,{style:{width:"100%",height:"max-content"},children:[(0,i.jsx)(br,{onItemClick:g,activeIndex:e}),(0,i.jsx)(b9,{orderCategory:e,isCompact:b})]})})},cb=(0,n.memo)(ca),cc=c(19259);function cd(){var a=(0,aJ.Z)(["\n  border-radius: 10px\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return cd=function(){return a},a}var ce=aK.ZP.div.withConfig({componentId:"sc-c2929790-0"})(cd(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.background}),cf=function(a){var b=a.onDismiss,c=a.currencies,d=a.formattedAmounts,e=a.currentMarketRate,f=a.currentMarketRateInverted,g=a.limitPrice,h=a.limitPriceInverted,j=a.percentageRateDifference,k=a.onConfirm,l=a.attemptingTxn,m=a.txHash,n=a.customOnDismiss,o=a.swapErrorMessage,p=(0,J.Z)().chainId,r=(0,x.$G)().t,t=(0,aC.ZP)().theme,v=(0,K.pu)(c.output,p),w=(0,q.Z)().isMobile,y=function(){n&&n(),b()};return(0,i.jsxs)(bA.Z,{title:r("Confirm Limit Order"),headerBackground:t.colors.gradientCardHeader,onDismiss:y,style:{width:w?"100%":"436px"},children:[l?(0,i.jsx)(ci,{}):m?(0,i.jsx)(bD.rD,{chainId:p,hash:m,currencyToAdd:v,onDismiss:y}):o?(0,i.jsx)(bD.ht,{onDismiss:y,message:o}):(0,i.jsx)(cg,{currencies:c,formattedAmounts:d,currentMarketRate:e,currentMarketRateInverted:f,limitPrice:g,limitPriceInverted:h,percentageRateDifference:j}),!m&&!o&&(0,i.jsx)(s.Z,{justifyContent:"center",mt:"24px",children:(0,i.jsx)(u.Z,{scale:"md",variant:"primary",onClick:k,width:"100%",disabled:l,children:r(l?"Confirming...":"Confirm")})})]})},cg=function(a){var b,c,d,e,f,g,h,j,k,l,m=a.currencies,n=a.formattedAmounts,o=a.currentMarketRate,p=a.currentMarketRateInverted,q=a.limitPrice,r=a.limitPriceInverted,t=a.percentageRateDifference,u=(0,x.$G)().t,v="1 ".concat(null===(b=m.input)|| void 0===b?void 0:b.symbol," = ").concat(o," ").concat(null===(c=m.output)|| void 0===c?void 0:c.symbol),w="1 ".concat(null===(d=m.output)|| void 0===d?void 0:d.symbol," = ").concat(p," ").concat(null===(e=m.input)|| void 0===e?void 0:e.symbol),y="1 ".concat(null===(f=m.input)|| void 0===f?void 0:f.symbol," = ").concat(q," ").concat(null===(g=m.output)|| void 0===g?void 0:g.symbol),z="1 ".concat(null===(h=m.output)|| void 0===h?void 0:h.symbol," = ").concat(r," ").concat(null===(j=m.input)|| void 0===j?void 0:j.symbol);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,{flexDirection:"column",width:"100%",children:[(0,i.jsxs)(s.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"24px",color:"text",children:n.input}),(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(aW.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(k=m.input)|| void 0===k?void 0:k.symbol}),(0,i.jsx)(cc.Xw,{currency:m.input})]})]}),(0,i.jsx)(s.Z,{justifyContent:"center",children:(0,i.jsx)(bf.Z,{})}),(0,i.jsxs)(s.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"24px",color:"text",children:n.output}),(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(aW.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(l=m.output)|| void 0===l?void 0:l.symbol}),(0,i.jsx)(cc.Xw,{currency:m.output})]})]})]}),(0,i.jsx)(ch,{currentPriceExchangeRateText:v,currentPriceExchangeRateTextReversed:w,limitPriceExchangeRateText:y,limitPriceExchangeRateTextReversed:z}),(0,i.jsx)(bF.Z,{variant:"success",mt:"24px",children:(0,i.jsx)(bF.Y,{children:u("Limit price is %percentage%% above the current market rate. The order will be executed when the market price reaches high enough above your limit price (to also pay for limit order execution gas fees).",{percentage:t})})}),(0,i.jsx)(bG,{})]})},ch=(0,n.memo)(function(a){var b=a.currentPriceExchangeRateText,c=a.currentPriceExchangeRateTextReversed,d=a.limitPriceExchangeRateText,e=a.limitPriceExchangeRateTextReversed,f=(0,x.$G)().t;return(0,i.jsxs)(ce,{children:[(0,i.jsxs)(s.Z,{justifyContent:"space-between",children:[(0,i.jsx)(aW.Z,{fontSize:"14px",color:"textSubtle",children:f("Current Market Price")}),(0,i.jsxs)(s.Z,{flexDirection:"column",children:[(0,i.jsx)(aW.Z,{color:"text",fontSize:"14px",bold:!0,children:b}),(0,i.jsx)(aW.Z,{color:"text",fontSize:"14px",children:c})]})]}),(0,i.jsxs)(s.Z,{justifyContent:"space-between",mt:"16px",children:[(0,i.jsx)(aW.Z,{fontSize:"14px",color:"textSubtle",children:f("Limit Price")}),(0,i.jsxs)(s.Z,{flexDirection:"column",children:[(0,i.jsx)(aW.Z,{color:"#129E7D",fontSize:"14px",bold:!0,children:d}),(0,i.jsx)(aW.Z,{color:"#129E7D",fontSize:"14px",children:e})]})]})]})}),ci=(0,n.memo)(function(){var a=(0,x.$G)().t;return(0,i.jsxs)(s.Z,{children:[(0,i.jsxs)(s.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,i.jsx)(aW.Z,{fontSize:"20px",small:!0,color:"secondary",children:a("Confirm")}),(0,i.jsx)(aW.Z,{small:!0,color:"textSubtle",mt:"8px",children:a("Please confirm the transaction in your wallet")})]}),(0,i.jsx)(s.Z,{children:(0,i.jsx)(bC.Z,{size:70})})]})}),cj=function(a,b){if(a&&b){var c=b.subtract(a).divide(a);return new H.gG(c.numerator,c.denominator)}},ck=c(7216),cl=c(93156),cm=c(29159),cn=function(){var a,b,c,d,e,f,g=(0,aG.Ge)(),h=g.account,l=g.chainId,D=(0,x.$G)().t,E=(0,o.useRouter)(),F=(0,q.Z)(),G=F.isMobile,H=F.isTablet,K=(0,aC.ZP)().theme,N=(0,k.Z)((0,aA.vD)(G),2),P=N[0],R=N[1],S=(0,n.useState)(!1),U=S[0],V=S[1],W=(0,n.useState)(P),X=W[0],Y=W[1];(0,n.useEffect)(function(){R(X)},[X,R]);var Z=ae(),$=[(0,L.U8)(null==Z?void 0:Z.inputCurrencyId),(0,L.U8)(null==Z?void 0:Z.outputCurrencyId),],_=$[0],aa=$[1],ab=(0,n.useMemo)(function(){var a;return null!==(f=(a=[_,aa]).filter(function(a){return null==a?void 0:a.isToken}))&& void 0!==f?f:[]},[_,aa]),ac=(0,L.e_)(),ad=(0,n.useMemo)(function(){return ab&&ab.filter(function(a){return!(a.address in ac)&&a.chainId===l})},[ac,ab,l]),af=(0,k.Z)((0,r.Z)((0,i.jsx)(ck.Z,{tokens:ad,onCancel:function(){return E.push("/limit-orders")}}),!1,!1,"limitOrderTokenWarningModal"),1),ag=af[0];(0,n.useEffect)(function(){ad.length>0&&ag()},[ad.length]);var ai,aj,ak,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax=ay(),aH=ax.handlers,aJ=aH.handleInput,aK=aH.handleCurrencySelection,aL=aH.handleSwitchTokens,aM=aH.handleLimitOrderSubmission,aN=aH.handleRateType,aR=ax.derivedOrderInfo,aS=aR.currencies,aT=aR.currencyBalances,aU=aR.parsedAmounts,aV=aR.formattedAmounts,aW=aR.rawAmounts,aX=aR.trade,aY=aR.price,aZ=aR.inputError,a$=aR.wrappedCurrencies,a_=aR.singleTokenPrice,a0=aR.currencyIds,a2=ax.orderState,a3=a2.independentField,a4=a2.basisField,a5=a2.rateType,a6=(0,n.useState)({tradeToConfirm:void 0,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),a7=a6[0],a8=a7.swapErrorMessage,a9=a7.attemptingTxn,ba=a7.txHash,bb=a6[1],bc=(0,k.Z)((0,aD.tz)(aU.input),2),bd=bc[0],bf=bc[1],bg=(0,n.useState)(!1),bh=bg[0],bi=bg[1],bj=(0,aE.i)(aT.input),bm=Boolean(bj&&(null===(a=aU.input)|| void 0===a?void 0:a.equalTo(bj))),bn=null==aX?void 0:aX.executionPrice,bo=cj(bn,aY),bp=(0,n.useCallback)(function(a){aJ(T.g.INPUT,a)},[aJ]),bq=(0,n.useCallback)(function(a){aJ(T.g.OUTPUT,a)},[aJ]),br=(0,n.useCallback)(function(a){bi(!1),aK(T.g.INPUT,a),(0,p.Z)("inputCurrency",(0,cm.H)(a))},[aK]),bs=(0,n.useCallback)(function(a){aJ(T.g.PRICE,a)},[aJ]),bt=(0,n.useCallback)(function(){bj&&aJ(T.g.INPUT,bj.toExact())},[bj,aJ]),bu=(0,n.useCallback)(function(a){aK(T.g.OUTPUT,a),(0,p.Z)("outputCurrency",(0,cm.H)(a))},[aK]),bv=(0,n.useCallback)((0,j.Z)(m().mark(function a(){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,bf();case 2:case"end":return a.stop()}},a)})),[bf]),bw=(0,n.useCallback)(function(){ba&&bp("")},[ba,bp]),bx=(0,n.useCallback)(function(){a4===T.g.INPUT?bp(aV.input):bq(aV.output)},[bp,bq,aV.input,aV.output,a4]),by=(0,n.useCallback)(function(){if(aM){bb(function(a){return{attemptingTxn:!0,tradeToConfirm:a.tradeToConfirm,swapErrorMessage:void 0,txHash:void 0}});try{if(!(null===(a=a$.input)|| void 0===a?void 0:a.address))throw Error("Invalid input currency");if(!(null===(b=a$.output)|| void 0===b?void 0:b.address))throw Error("Invalid output currency");if(!aW.input)throw Error("Invalid input amount");if(!aW.output)throw Error("Invalid output amount");if(!h)throw Error("No account");var a,b,c,d,e,f,g=(null===(c=aS.input)|| void 0===c?void 0:c.isToken)?null===(d=a$.input)|| void 0===d?void 0:d.address:al.ag,i=(null===(e=aS.output)|| void 0===e?void 0:e.isToken)?null===(f=a$.output)|| void 0===f?void 0:f.address:al.ag,j={inputToken:g,outputToken:i,inputAmount:aW.input,outputAmount:aW.output,owner:h};aM(j).then(function(a){var b=a.hash;bb(function(a){return{attemptingTxn:!1,tradeToConfirm:a.tradeToConfirm,swapErrorMessage:void 0,txHash:b}})}).catch(function(a){bb(function(b){return{attemptingTxn:!1,tradeToConfirm:b.tradeToConfirm,swapErrorMessage:a.message,txHash:void 0}})})}catch(k){console.error(k)}}},[aM,h,aW.input,aW.output,aS.input,aS.output,null===(b=a$.input)|| void 0===b?void 0:b.address,null===(c=a$.output)|| void 0===c?void 0:c.address,]),bz=(0,n.useCallback)(function(){bi(!1),aL(),(0,p.Z)("inputCurrency",a0.output),(0,p.Z)("outputCurrency",a0.input)},[aL,a0.output,a0.input]),bA=(ai=aU.input,aj=aU.output,ak=a5,am=(0,J.Z)().chainId,an=(0,aB.Z)(),ao=(0,aA.Fh)(),ap=(0,az.formatUnits)(ao?ah.O$.from(ao).mul(I.q3):"0"),aq=(0,Q.Z)(ap,an),ar=(null==ai?void 0:ai.currency.symbol)==="BNB",as=(0,M.AU)(aq,ar?null:null==ai?void 0:ai.currency),at=(0,n.useMemo)(function(){return ar?aq:as&&(null==as?void 0:as.outputAmount)?as.outputAmount.add(as.outputAmount.multiply(2e3).divide(1e4)):void 0},[as,aq,ar]),au=(0,n.useMemo)(function(){return at&&ai&&ai.subtract(at)},[at,ai]),av=(0,n.useMemo)(function(){return ai&&(as||ar)&&au&&aj?ar&&aq.greaterThan(ai.asFraction)?void 0:as&&as.outputAmount.greaterThan(ai.asFraction)?void 0:O(au,aj):null},[au,aj,ai,as,ar,aq]),aw=(0,n.useMemo)(function(){return av?ak===T.j.DIV?av.invert().toSignificant(6):av.toSignificant(6):"never executes"},[ak,av]),am?{realExecutionPrice:av,gasPrice:ao,realExecutionPriceAsString:aw}:{realExecutionPrice:void 0,realExecutionPriceAsString:void 0,gasPrice:void 0}).realExecutionPriceAsString,bB=(0,k.Z)((0,r.Z)((0,i.jsx)(cf,{currencies:aS,formattedAmounts:aV,currentMarketRate:null==bn?void 0:bn.toSignificant(4),currentMarketRateInverted:null==bn?void 0:bn.invert().toSignificant(4),limitPrice:null==aY?void 0:aY.toSignificant(6),limitPriceInverted:null==aY?void 0:aY.invert().toSignificant(6),percentageRateDifference:parseFloat(null==bo?void 0:bo.toSignificant(3)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}),onConfirm:by,attemptingTxn:a9,txHash:ba,customOnDismiss:bw,swapErrorMessage:a8}),!0,!0,"confirmLimitOrderModal"),1),bC=bB[0];(0,n.useEffect)(function(){bd===aD.UK.PENDING&&bi(!0)},[bd,bh]);var bD=!aZ&&(bd===aD.UK.NOT_APPROVED||bd===aD.UK.PENDING),bE=U||X;return(0,i.jsxs)(bl.Z,{removePadding:U,hideFooterOnDesktop:bE,noMinHeight:!0,helpUrl:I.vm,children:[(0,i.jsx)(aI,{}),(0,i.jsxs)(s.Z,{width:"100%",justifyContent:"center",position:"relative",mb:bE?null:"24px",mt:U?"24px":null,children:[!G&&(0,i.jsxs)(s.Z,{width:U?"100%":"50%",maxWidth:"928px",flexDirection:"column",children:[(0,i.jsx)(aF.Z,{inputCurrencyId:a0.input,inputCurrency:aS.input,outputCurrencyId:a0.output,outputCurrency:aS.output,isChartExpanded:U,setIsChartExpanded:V,isChartDisplayed:X,currentSwapPrice:a_,isFullWidthContainer:!0}),X&&(0,i.jsx)(t.Z,{mb:"48px"}),(0,i.jsx)(t.Z,{width:"100%",children:(0,i.jsx)(cb,{isCompact:H})})]}),(0,i.jsxs)(s.Z,{flexDirection:"column",alignItems:"center",children:[(0,i.jsx)(aP,{$isChartExpanded:!1,children:(0,i.jsx)(aQ,{children:(0,i.jsxs)(A.j,{children:[(0,i.jsx)(a1,{title:D("Limit"),subtitle:D("Place a limit order to trade at a set price"),setIsChartDisplayed:Y,isChartDisplayed:X}),(0,i.jsxs)(aO,{id:"limit-order-page",style:{minHeight:"412px"},children:[(0,i.jsxs)(y.Tz,{gap:"sm",children:[(0,i.jsx)(z.Z,{label:D(a3===T.g.OUTPUT?"From (estimated)":"From"),value:aV.input,showMaxButton:!bm,currency:aS.input,onUserInput:bp,onMax:bt,onCurrencySelect:br,otherCurrency:aS.output,id:"limit-order-currency-input",showCommonBases:!0,commonBasesType:cl.L0.SWAP_LIMITORDER}),(0,i.jsx)(bk,{handleSwitchTokens:bz,color:aS[T.g.INPUT]&&aS[T.g.OUTPUT]?"primary":"text"}),(0,i.jsx)(z.Z,{value:aV.output,onUserInput:bq,label:D(a3===T.g.INPUT?"To (estimated)":"To"),showMaxButton:!1,currency:aS.output,onCurrencySelect:bu,otherCurrency:aS.output,id:"limit-order-currency-output",showCommonBases:!0,commonBasesType:cl.L0.SWAP_LIMITORDER}),(0,i.jsx)(be,{id:"limit-order-desired-rate-input",value:aV.price,onUserInput:bs,inputCurrency:aS.input,outputCurrency:aS.output,percentageRateDifference:bo,rateType:a5,handleRateType:aN,price:aY,handleResetToMarketPrice:bx,realExecutionPriceAsString:aZ?void 0:bA,disabled:!aV.input&&!aV.output})]}),(0,i.jsx)(t.Z,{mt:"0.25rem",children:h?bD?(0,i.jsx)(u.Z,{variant:"primary",onClick:bv,id:"enable-order-button",width:"100%",disabled:bh,children:bh?D("Enabling %asset%",{asset:null===(d=aS.input)|| void 0===d?void 0:d.symbol}):D("Enable %asset%",{asset:null===(e=aS.input)|| void 0===e?void 0:e.symbol})}):(0,i.jsx)(u.Z,{variant:"primary",onClick:function(){bb({tradeToConfirm:aX,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),bC()},id:"place-order-button",width:"100%",disabled:!!aZ||"never executes"===bA,children:aZ||"never executes"===bA?aZ||D("Can't execute this order"):D("Place an Order")}):(0,i.jsx)(B.Z,{width:"100%"})}),(0,i.jsx)(s.Z,{mt:"16px",justifyContent:"center",children:(0,i.jsx)(v.Z,{external:!0,href:"https://www.gelato.network/",children:(0,i.jsx)("img",{src:K.isDark?"/images/powered_by_gelato_white.svg":"/images/powered_by_gelato_black.svg",alt:"Powered by Gelato",width:"170px",height:"48px"})})})]})]})})}),G&&(0,i.jsx)(s.Z,{mt:"24px",width:"100%",children:(0,i.jsx)(cb,{isCompact:!0})}),bE&&(0,i.jsx)(t.Z,{display:["none",null,null,"block"],width:"100%",height:"100%",children:(0,i.jsx)(C.Z,{variant:"side",helpUrl:I.vm})})]})]}),(0,i.jsx)(w.Z,{content:(0,i.jsx)(aF.Z,{inputCurrencyId:a0.input,inputCurrency:aS.input,outputCurrencyId:a0.output,outputCurrency:aS.output,isChartExpanded:U,setIsChartExpanded:V,isChartDisplayed:X,currentSwapPrice:a_,isMobile:!0}),isOpen:X,setIsOpen:Y})]})},co=function(){return(0,i.jsx)(cn,{})}}},function(a){a.O(0,[2077,878,5855,8451,2600,8939,5470,6749,1548,6405,4642,9774,2888,179],function(){var b;return a(a.s=84120)}),_N_E=a.O()}])